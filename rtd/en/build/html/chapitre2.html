<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>; &mdash; atoum 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="atoum 1.0.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">atoum 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <p>=Écrire ses tests</p>
<p>==Assertions</p>
<p>===variable</p>
<p>C’est l’assertion de base de toutes les variables. Elle contient les tests nécessaires à n’importe quel type de variable.</p>
<p>====isCallable====variableIsCallable</p>
<p>##isCallable## vérifie que la variable peut être appelée comme fonction.</p>
<p>[[[php
$f = function() {</p>
<blockquote>
<div>// code</div></blockquote>
<p>};</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($f)</dt>
<dd>-&gt;isCallable()  // passe</dd>
<dt>-&gt;variable(&#8216;VendorProjectfoobar&#8217;)</dt>
<dd>-&gt;isCallable()</dd>
<dt>-&gt;variable(array(&#8216;VendorProjectFoo&#8217;, &#8216;bar&#8217;))</dt>
<dd>-&gt;isCallable()</dd>
<dt>-&gt;variable(&#8216;VendorProjectFoo::bar&#8217;)</dt>
<dd>-&gt;isCallable()</dd>
</dl>
</dd>
</dl>
<div class="section" id="id1">
<h1>;<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>====isEqualTo====variableIsEqualTo</p>
<p>##isEqualTo## vérifie que la variable est égale à une certaine donnée.</p>
<p>[[[php
$a = &#8216;a&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($a)</dt>
<dd>-&gt;isEqualTo(&#8216;a&#8217;)    // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id2">
<h1>;<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h1>
<p>{{{warning
##isEqualTo## ne teste pas le type de la variable. Si vous souhaitez vérifier également son type, utilisez ##[[isIdenticalTo|#variableIsIdenticalTo]]##.
}}}</p>
<p>====isIdenticalTo====variableIsIdenticalTo</p>
<p>##isIdenticalTo## vérifie que la variable a la même valeur et le même type qu’une certaine donnée. Dans le cas d’objets, ##isIdenticalTo## vérifie que les données pointent sur la même instance.</p>
<p>[[[php
$a = &#8216;1&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($a)</dt>
<dd>-&gt;isIdenticalTo(1)          // échoue</dd>
</dl>
</dd>
</dl>
<p>;</p>
<p>$stdClass1 = new StdClass();
$stdClass2 = new StdClass();
$stdClass3 = $stdClass1;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($stdClass1)</dt>
<dd>-&gt;isIdenticalTo(stdClass3)  // passe
-&gt;isIdenticalTo(stdClass2)  // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id3">
<h1>;<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h1>
<p>{{{warning
##isIdenticalTo## teste le type de la variable. Si vous ne souhaitez pas vérifier son type, utilisez ##[[isEqualTo|#variableIsEqualTo]]##.
}}}</p>
<p>====isNotCallable====variableIsNotCallable</p>
<p>##isNotCallable## vérifie que la variable ne peut pas être appelée comme fonction.</p>
<p>[[[php
$f = function() {</p>
<blockquote>
<div>// code</div></blockquote>
<p>};
$int    = 1;
$string = &#8216;nonExistingMethod&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($f)</dt>
<dd>-&gt;isNotCallable()   // échoue</dd>
<dt>-&gt;variable($int)</dt>
<dd>-&gt;isNotCallable()   // passe</dd>
<dt>-&gt;variable($string)</dt>
<dd>-&gt;isNotCallable()   // passe</dd>
<dt>-&gt;variable(new StdClass)</dt>
<dd>-&gt;isNotCallable()   // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id4">
<h1>;<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h1>
<p>====isNotEqualTo====variableIsNotEqualTo</p>
<p>##isNotEqualTo## vérifie que la variable n’a pas la même valeur qu’une certaine donnée.</p>
<p>[[[php
$a       = &#8216;a&#8217;;
$aString = &#8216;1&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($a)</dt>
<dd>-&gt;isNotEqualTo(&#8216;b&#8217;)     // passe
-&gt;isNotEqualTo(&#8216;a&#8217;)     // échoue</dd>
<dt>-&gt;variable($aString)</dt>
<dd>-&gt;isNotEqualTo($1)      // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id5">
<h1>;<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h1>
<p>{{{warning
##isNotEqualTo## ne teste pas le type de la variable. Si vous souhaitez vérifier également son type, utilisez ##[[isNotIdenticalTo|#variableIsNotIdenticalTo]]##.
}}}</p>
<p>====isNotIdenticalTo====variableIsNotIdenticalTo</p>
<p>##isNotIdenticalTo## vérifie que la variable n’a ni le même type ni la même valeur qu’une certaine donnée.</p>
<p>Dans le cas d’objets, ##isNotIdenticalTo## vérifie que les données ne pointent pas sur la même instance.</p>
<p>[[[php
$a = &#8216;1&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($a)</dt>
<dd>-&gt;isNotIdenticalTo(1)           // passe</dd>
</dl>
</dd>
</dl>
<p>;</p>
<p>$stdClass1 = new StdClass();
$stdClass2 = new StdClass();
$stdClass3 = $stdClass1;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($stdClass1)</dt>
<dd>-&gt;isNotIdenticalTo(stdClass2)   // passe
-&gt;isNotIdenticalTo(stdClass3)   // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id6">
<h1>;<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h1>
<p>{{{warning
##isNotIdenticalTo## teste le type de la variable. Si vous ne souhaitez pas vérifier son type, utilisez ##[[isNotEqualTo|#variableIsNotEqualTo]]##.
}}}</p>
<p>====isNull</p>
<p>##isNull## vérifie que la variable est nulle.</p>
<p>[[[php
$emptyString = &#8216;&#8217;;
$null        = null;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($emptyString)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;isNull()              // échoue</dt>
<dd>// (c&#8217;est vide mais pas null)</dd>
</dl>
</dd>
<dt>-&gt;variable($null)</dt>
<dd>-&gt;isNull()              // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id7">
<h1>;<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h1>
<p>====isNotNull</p>
<p>##isNotNull## vérifie que la variable n’est pas nulle.</p>
<p>[[[php
$emptyString = &#8216;&#8217;;
$null        = null;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable($emptyString)</dt>
<dd>-&gt;isNotNull()           // passe (c&#8217;est vide mais pas null)</dd>
<dt>-&gt;variable($null)</dt>
<dd>-&gt;isNotNull()           // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id8">
<h1>;<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h1>
<p>===boolean</p>
<p>C’est l’assertion dédiée aux booléens.</p>
<p>Si vous essayez de tester une variable qui n’est pas un booléen avec cette assertion, cela échouera.</p>
<p>{{{info
##null## n’est pas un booléen. Reportez-vous au manuel de PHP pour savoir ce que ##[[is_bool|http://php.net/is_bool]]## considère ou non comme un booléen.
}}}</p>
<p>====isEqualTo====booleanIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isFalse</p>
<p>##isFalse## vérifie que le booléen est strictement égal à ##false##.</p>
<p>[[[php
$true  = true;
$false = false;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;boolean($true)</dt>
<dd>-&gt;isFalse()     // échoue</dd>
<dt>-&gt;boolean($false)</dt>
<dd>-&gt;isFalse()     // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id9">
<h1>;<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h1>
<p>====isIdenticalTo====booleanIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isNotEqualTo====booleanIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====booleanIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====isTrue</p>
<p>##isTrue## vérifie que le booléen est strictement égal à ##true##.</p>
<p>[[[php
$true  = true;
$false = false;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;boolean($true)</dt>
<dd>-&gt;isTrue()      // passe</dd>
<dt>-&gt;boolean($false)</dt>
<dd>-&gt;isTrue()      // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id10">
<h1>;<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h1>
<p>===integer</p>
<p>C’est l’assertion dédiée aux entiers.</p>
<p>Si vous essayez de tester une variable qui n’est pas un entier avec cette assertion, cela échouera.</p>
<p>{{{info
##null## n’est pas un entier. Reportez-vous au manuel de PHP pour savoir ce que ##[[is_int|http://php.net/is_int]]## considère ou non comme un entier.
}}}</p>
<p>====isEqualTo====integerIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isGreaterThan====integerIsGreaterThan</p>
<p>##isGreaterThan## vérifie que l’entier est strictement supérieur à une certaine donnée.</p>
<p>[[[php
$zero = 0;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;integer($zero)</dt>
<dd><p class="first">-&gt;isGreaterThan(-1)     // passe
-&gt;isGreaterThan(&#8216;-1&#8217;)   // échoue car &#8220;-1&#8221;</p>
<blockquote>
<div>// n&#8217;est pas un entier</div></blockquote>
<p class="last">-&gt;isGreaterThan(0)      // échoue</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id11">
<h1>;<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h1>
<p>====isGreaterThanOrEqualTo====integerIsGreaterThanOrEqualTo</p>
<p>##isGreaterThanOrEqualTo## vérifie que l’entier est supérieur ou égal à une certaine donnée.</p>
<p>[[[php
$zero = 0;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;integer($zero)</dt>
<dd><p class="first">-&gt;isGreaterThanOrEqualTo(-1)    // passe
-&gt;isGreaterThanOrEqualTo(0)     // passe
-&gt;isGreaterThanOrEqualTo(&#8216;-1&#8217;)  // échoue car &#8220;-1&#8221;</p>
<blockquote class="last">
<div>// n&#8217;est pas un entier</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id12">
<h1>;<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h1>
<p>====isIdenticalTo====integerIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isLessThan====integerIsLessThan</p>
<p>##isLessThan## vérifie que l’entier est strictement inférieur à une certaine donnée.</p>
<p>[[[php
$zero = 0;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;integer($zero)</dt>
<dd>-&gt;isLessThan(10)    // passe
-&gt;isLessThan(&#8216;10&#8217;)  // échoue car &#8220;10&#8221; n&#8217;est pas un entier
-&gt;isLessThan(0)     // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id13">
<h1>;<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h1>
<p>====isLessThanOrEqualTo====integerIsLessThanOrEqualTo</p>
<p>##isLessThanOrEqualTo## vérifie que l’entier est inférieur ou égal à une certaine donnée.</p>
<p>[[[php
$zero = 0;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;integer($zero)</dt>
<dd><p class="first">-&gt;isLessThanOrEqualTo(10)       // passe
-&gt;isLessThanOrEqualTo(0)        // passe
-&gt;isLessThanOrEqualTo(&#8216;10&#8217;)     // échoue car &#8220;10&#8221;</p>
<blockquote class="last">
<div>// n&#8217;est pas un entier</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id14">
<h1>;<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h1>
<p>====isNotEqualTo====integerIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====integerIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====isZero====integerIsZero</p>
<p>##isZero## vérifie que l’entier est égal à 0.</p>
<p>[[[php
$zero    = 0;
$notZero = -1;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;integer($zero)</dt>
<dd>-&gt;isZero()          // passe</dd>
<dt>-&gt;integer($notZero)</dt>
<dd>-&gt;isZero()          // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id15">
<h1>;<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##isZero## est équivalent à ##isEqualTo(0)##.
}}}</p>
<p>===float</p>
<p>C’est l’assertion dédiée aux nombres décimaux.</p>
<p>Si vous essayez de tester une variable qui n’est pas un nombre décimal avec cette assertion, cela échouera.</p>
<p>{{{info
##null## n’est pas un nombre décimal. Reportez-vous au manuel de PHP pour savoir ce que ##[[is_float|http://php.net/is_float]]## considère ou non comme un nombre décimal.
}}}</p>
<p>====isEqualTo====floatIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isGreaterThan====floatIsGreaterThan</p>
<p>{{{inheritance
##isGreaterThan## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isGreaterThan##|#integerIsGreaterThan]]
}}}</p>
<p>====isGreaterThanOrEqualTo====floatIsGreaterThanOrEqualTo</p>
<p>{{{inheritance
##isGreaterThanOrEqualTo## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isGreaterThanOrEqualTo##|#integerIsGreaterThanOrEqualTo]]
}}}</p>
<p>====isIdenticalTo====floatIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isLessThan====floatIsLessThan</p>
<p>{{{inheritance
##isLessThan## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isLessThan##|#integerIsLessThan]]
}}}</p>
<p>====isLessThanOrEqualTo====floatIsLessThanOrEqualTo</p>
<p>{{{inheritance
##isLessThanOrEqualTo## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isLessThanOrEqualoo##|#integerIsLessThanOrEqualTo]]
}}}</p>
<p>====isNearlyEqualTo</p>
<p>##isNearlyEqualTo## vérifie que le nombre décimal est approximativement égal à la valeur qu’elle reçoit en argument.</p>
<p>En effet, en informatique, les nombres décimaux sont gérées d’une façon qui ne permet pas d’effectuer des comparaisons précises sans recourir à des outils spécialisés. Essayez par exemple d’exécuter la commande suivante:</p>
<p>[[[shell
$ php -r &#8216;var_dump(1 - 0.97 === 0.03);&#8217;
bool(false)
]]]</p>
<p>Le résultat devrait pourtant être ##true##.</p>
<p>{{{info
Pour avoir plus d’informations sur ce phénomène, reportez-vous au [[manuel de PHP|http://php.net/types.float]].
}}}</p>
<p>Cette méthode cherche donc à minorer ce problème.</p>
<p>[[[php
$float = 1 - 0.97;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;float($float)</dt>
<dd>-&gt;isNearlyEqualTo(0.03) // passe
-&gt;isEqualTo(0.03)       // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id16">
<h1>;<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h1>
<p>{{{info
Pour avoir plus d’informations sur l’algorithme utilisé, consultez le [[floating point guide|http://www.floating-point-gui.de/errors/comparison/]].
}}}</p>
<p>====isNotEqualTo====floatIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====floatIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====isZero====floatIsZero</p>
<p>{{{inheritance
##isZero## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isZero##|#integerIsZero]]
}}}</p>
<p>===sizeOf</p>
<p>C’est l’assertion dédiée aux tests sur la taille des tableaux et des objets implémentant l’interface ##Countable##.</p>
<p>[[[php
$array           = array(1, 2, 3);
$countableObject = new GlobIterator(&#8216;*&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;sizeOf($array)</dt>
<dd>-&gt;isEqualTo(3)</dd>
<dt>-&gt;sizeOf($countableObject)</dt>
<dd>-&gt;isGreaterThan(0)</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id17">
<h1>;<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h1>
<p>====isEqualTo====sizeOfIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isGreaterThan====sizeOfIsGreaterThan</p>
<p>{{{inheritance
##isGreaterThan## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isGreaterThan##|#integerIsGreaterThan]]
}}}</p>
<p>====isGreaterThanOrEqualTo====sizeOfIsGreaterThanOrEqualTo</p>
<p>{{{inheritance
##isGreaterThanOrEqualTo## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isGreaterThanOrEqualTo##|#integerIsGreaterThanOrEqualTo]]
}}}</p>
<p>====isIdenticalTo====sizeOfIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isLessThan====sizeOfIsLessThan</p>
<p>{{{inheritance
##isLessThan## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isLessThan##|#integerIsLessThan]]
}}}</p>
<p>====isLessThanOrEqualTo====sizeOfIsLessThanOrEqualTo</p>
<p>{{{inheritance
##isLessThanOrEqualTo## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isLessThanOrEqualoo##|#integerIsLessThanOrEqualTo]]
}}}</p>
<p>====isNotEqualTo====sizeOfIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====sizeOfIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====isZero====sizeOfIsZero</p>
<p>{{{inheritance
##isZero## est une méthode héritée de l’asserter ##integer##.
Pour plus d’informations, reportez-vous à la documentation de [[##integer::isZero##|#integerIsZero]]
}}}</p>
<p>===object</p>
<p>C’est l’assertion dédiée aux objets.</p>
<p>Si vous essayez de tester une variable qui n’est pas un objet avec cette assertion, cela échouera.</p>
<p>{{{info
##null## n’est pas un objet. Reportez-vous au manuel de PHP pour savoir ce que ##[[is_object|http://php.net/is_object]]## considère ou non comme un objet.
}}}</p>
<p>====hasSize====objectHasSize</p>
<p>##hasSize## vérifie la taille d’un objet qui implémente l’interface ##Countable##.</p>
<p>[[[php
$countableObject = new GlobIterator(&#8216;*&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;object($countableObject)</dt>
<dd>-&gt;hasSize(3)</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id18">
<h1>;<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h1>
<p>====isCallable====objectIsCallable</p>
<p>[[[php
class foo
{</p>
<blockquote>
<div><p>public function __invoke()
{</p>
<blockquote>
<div>// code</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;object(new foo)</dt>
<dd>-&gt;isCallable()  // passe</dd>
<dt>-&gt;object(new StdClass)</dt>
<dd>-&gt;isCallable()  // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id19">
<h1>;<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h1>
<p>{{{info
Pour être identifiés comme ##callable##, vos objets devront être instanciés à partir de classes qui implémentent la méthode magique [[##__invoke## | <a class="reference external" href="http://www.php.net/manual/fr/language.oop5.magic.php#object.invoke">http://www.php.net/manual/fr/language.oop5.magic.php#object.invoke</a>]].
}}}</p>
<p>{{{inheritance
##isCallable## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isCallable##|#variableIsCallable]]
}}}</p>
<p>====isCloneOf====objectIsCloneOf</p>
<p>##isCloneOf## vérifie qu’un objet est le clone d’un objet donné, c’est-à-dire que les objets sont égaux, mais ne pointent pas vers la même instance.</p>
<p>[[[php
$object1 = new StdClass;
$object2 = new StdClass;
$object3 = clone($object1);
$object4 = new StdClass;
$object4-&gt;foo = &#8216;bar&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;object($object1)</dt>
<dd>-&gt;isCloneOf($object2)   // passe
-&gt;isCloneOf($object3)   // passe
-&gt;isCloneOf($object4)   // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id20">
<h1>;<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h1>
<p>{{{info
Pour avoir plus de précision sur la comparaison d’objet, reportez-vous au [[manuel de PHP|http://php.net/language.oop5.object-comparison]].
}}}</p>
<p>====isEmpty====objectIsEmpty</p>
<p>##isEmpty## vérifie que la taille d’un objet implémentant l’interface ##Countable## est égale à 0.</p>
<p>[[[php
$countableObject = new GlobIterator(&#8216;atoum.php&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;object($countableObject)</dt>
<dd>-&gt;isEmpty()</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id21">
<h1>;<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##isEmpty## est équivalent à ##hasSize(0)##.
}}}</p>
<p>====isEqualTo====objectIsEqualTo</p>
<p>##isEqualTo## vérifie qu’un objet est égal à un autre.
Deux objets sont considérés égaux lorsqu’ils ont les mêmes attributs et valeurs, et qu’ils sont des instances de la même classe.</p>
<p>{{{info
Pour avoir plus de précision sur la comparaison d’objet, reportez-vous au [[manuel de PHP|http://php.net/language.oop5.object-comparison]].
}}}</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isIdenticalTo====objectIsIdenticalTo</p>
<p>##isIdenticalTo## vérifie que deux objets sont identiques.
Deux objets sont considérés identiques lorsqu’ils font référence à la même instance de la même classe.</p>
<p>{{{info
Pour avoir plus de précision sur la comparaison d’objet, reportez-vous au [[manuel de PHP|http://php.net/language.oop5.object-comparison]].
}}}</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isInstanceOf====objectIsInstanceOf</p>
<p>##isInstanceOf## vérifie qu’un objet est&nbsp;:
* une instance de la classe donnée,
* une sous-classe de la classe donnée (abstraite ou non),
* une instance d’une classe qui implémente l’interface donnée.</p>
<p>[[[php
$object = new StdClass();</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;object($object)</dt>
<dd>-&gt;isInstanceOf(&#8216;StdClass&#8217;)     // passe
-&gt;isInstanceOf(&#8216;Iterator&#8217;)     // échoue</dd>
</dl>
</dd>
</dl>
<p>;</p>
<p>interface FooInterface
{</p>
<blockquote>
<div>public function foo();</div></blockquote>
<p>}</p>
<p>class FooClass implements FooInterface
{</p>
<blockquote>
<div><p>public function foo()
{</p>
<blockquote>
<div>echo &#8220;foo&#8221;;</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
<p>class BarClass extends FooClass
{
}</p>
<p>$foo = new FooClass;
$bar = new BarClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;object($foo)</dt>
<dd>-&gt;isInstanceOf(&#8216;FooClass&#8217;)     // passe
-&gt;isInstanceOf(&#8216;FooInterface&#8217;) // passe
-&gt;isInstanceOf(&#8216;BarClass&#8217;)     // échoue
-&gt;isInstanceOf(&#8216;StdClass&#8217;)     // échoue</dd>
<dt>-&gt;object($bar)</dt>
<dd>-&gt;isInstanceOf(&#8216;FooClass&#8217;)     // passe
-&gt;isInstanceOf(&#8216;FooInterface&#8217;) // passe
-&gt;isInstanceOf(&#8216;BarClass&#8217;)     // passe
-&gt;isInstanceOf(&#8216;StdClass&#8217;)     // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id22">
<h1>;<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h1>
<p>{{{info
Les noms des classes et des interfaces doivent être absolus, car les éventuelles importations d’espace de nommage ne sont pas prises en compte.
}}}</p>
<p>====isNotCallable====objectIsNotCallable</p>
<p>[[[php
class foo
{</p>
<blockquote>
<div><p>public function __invoke()
{</p>
<blockquote>
<div>// code</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;variable(new foo)</dt>
<dd>-&gt;isNotCallable()   // échoue</dd>
<dt>-&gt;variable(new StdClass)</dt>
<dd>-&gt;isNotCallable()   // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id23">
<h1>;<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h1>
<p>{{{inheritance
##isNotCallable## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotCallable##|#variableIsNotCallable]]
}}}</p>
<p>====isNotEqualTo====objectIsNotEqualTo</p>
<p>##isEqualTo## vérifie qu’un objet n’est pas égal à un autre.
Deux objets sont considérés égaux lorsqu’ils ont les mêmes attributs et valeurs, et qu’ils sont des instances de la même classe.</p>
<p>{{{info
Pour avoir plus de précision sur la comparaison d’objet, reportez-vous au [[manuel de PHP|http://php.net/language.oop5.object-comparison]].
}}}</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====objectIsNotIdenticalTo</p>
<p>##isIdenticalTo## vérifie que deux objets ne sont pas identiques.
Deux objets sont considérés identiques lorsqu’ils font référence à la même instance de la même classe.</p>
<p>{{{info
Pour avoir plus de précision sur la comparaison d’objet, reportez-vous au [[manuel de PHP|http://php.net/language.oop5.object-comparison]].
}}}</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>===dateInterval</p>
<p>C’est l’assertion dédiée à l’objet ##[[DateInterval|http://php.net/dateinterval]]##.</p>
<p>Si vous essayez de tester une variable qui n’est pas un objet ##DateInterval## (ou une classe qui l’étend) avec cette assertion, cela échouera.</p>
<p>====isCloneOf====dateIntervalIsCloneOf</p>
<p>{{{inheritance
##isCloneOf## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isCloneOf##|#objectIsCloneOf]]
}}}</p>
<p>====isEqualTo====dateIntervalIsEqualTo</p>
<p>##isEqualTo## vérifie que la durée de l’objet ##DateInterval## est égale à la durée d’un autre objet ##DateInterval##.</p>
<p>[[[php
$di = new DateInterval(&#8216;P1D&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateInterval($di)</dt>
<dd><dl class="first docutils">
<dt>-&gt;isEqualTo(                // passe</dt>
<dd>new DateInterval(&#8216;P1D&#8217;)</dd>
</dl>
<p>)
-&gt;isEqualTo(                // échoue</p>
<blockquote>
<div>new DateInterval(&#8216;P2D&#8217;)</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id24">
<h1>;<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h1>
<p>====isGreaterThan====dateIntervalIsGreaterThan</p>
<p>##isGreaterThan## vérifie que la durée de l’objet ##DateInterval## est supérieure à la durée d’un autre objet ##DateInterval##.</p>
<p>[[[php
$di = new DateInterval(&#8216;P2D&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateInterval($di)</dt>
<dd><dl class="first docutils">
<dt>-&gt;isGreaterThan(            // passe</dt>
<dd>new DateInterval(&#8216;P1D&#8217;)</dd>
</dl>
<p>)
-&gt;isGreaterThan(            // échoue</p>
<blockquote>
<div>new DateInterval(&#8216;P2D&#8217;)</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id25">
<h1>;<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h1>
<p>====isGreaterThanOrEqualTo====dateIntervalIsGreaterThanOrEqualTo</p>
<p>##isGreaterThanOrEqualTo## vérifie que la durée de l’objet ##DateInterval## est supérieure ou égale à la durée d’un autre objet ##DateInterval##.</p>
<p>[[[php
$di = new DateInterval(&#8216;P2D&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateInterval($di)</dt>
<dd><dl class="first docutils">
<dt>-&gt;isGreaterThanOrEqualTo(   // passe</dt>
<dd>new DateInterval(&#8216;P1D&#8217;)</dd>
</dl>
<p>)
-&gt;isGreaterThanOrEqualTo(   // passe</p>
<blockquote>
<div>new DateInterval(&#8216;P2D&#8217;)</div></blockquote>
<p>)
-&gt;isGreaterThanOrEqualTo(   // échoue</p>
<blockquote>
<div>new DateInterval(&#8216;P3D&#8217;)</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id26">
<h1>;<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h1>
<p>====isIdenticalTo====dateIntervalIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isIdenticalTo##|#objectIsIdenticalTo]]
}}}</p>
<p>====isInstanceOf====dateIntervalIsInstanceOf</p>
<p>{{{inheritance
##isInstanceOf## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isInstanceOf##|#objectIsInstanceOf]]
}}}</p>
<p>====isLessThan====dateIntervalIsLessThan</p>
<p>##isLessThan## vérifie que la durée de l’objet ##DateInterval## est inférieure à la durée d’un autre objet ##DateInterval##.</p>
<p>[[[php
$di = new DateInterval(&#8216;P1D&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateInterval($di)</dt>
<dd><dl class="first docutils">
<dt>-&gt;isLessThan(               // passe</dt>
<dd>new DateInterval(&#8216;P2D&#8217;)</dd>
</dl>
<p>)
-&gt;isLessThan(               // échoue</p>
<blockquote>
<div>new DateInterval(&#8216;P1D&#8217;)</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id27">
<h1>;<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h1>
<p>====isLessThanOrEqualTo====dateIntervalIsLessThanOrEqualTo</p>
<p>##isLessThanOrEqualTo## vérifie que la durée de l’objet ##DateInterval## est inférieure ou égale à la durée d’un autre objet ##DateInterval##.</p>
<p>[[[php
$di = new DateInterval(&#8216;P2D&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateInterval($di)</dt>
<dd><dl class="first docutils">
<dt>-&gt;isLessThanOrEqualTo(      // passe</dt>
<dd>new DateInterval(&#8216;P3D&#8217;)</dd>
</dl>
<p>)
-&gt;isLessThanOrEqualTo(      // passe</p>
<blockquote>
<div>new DateInterval(&#8216;P2D&#8217;)</div></blockquote>
<p>)
-&gt;isLessThanOrEqualTo(      // échoue</p>
<blockquote>
<div>new DateInterval(&#8216;P1D&#8217;)</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id28">
<h1>;<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h1>
<p>====isNotEqualTo====dateIntervalIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isNotEqualTo##|#objectIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====dateIntervalIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isNotIdenticalTo##|#objectIsNotIdenticalTo]]
}}}</p>
<p>====isZero====dateIntervalIsZero</p>
<p>##isZero## vérifie que la durée de l’objet ##DateInterval## est égale à 0.</p>
<p>[[[php
$di1 = new DateInterval(&#8216;P0D&#8217;);
$di2 = new DateInterval(&#8216;P1D&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateInterval($di1)</dt>
<dd>-&gt;isZero()      // passe</dd>
<dt>-&gt;dateInterval($di2)</dt>
<dd>-&gt;isZero()      // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id29">
<h1>;<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h1>
<p>===dateTime</p>
<p>C’est l’assertion dédiée à l’objet ##[[DateTime|http://php.net/datetime]]##.</p>
<p>Si vous essayez de tester une variable qui n’est pas un objet ##DateTime## (ou une classe qui l’étend) avec cette assertion, cela échouera.</p>
<p>====hasDate====dateTimeHasDate</p>
<p>##hasDate## vérifie la partie date de l’objet ##DateTime##.</p>
<p>[[[php
$dt = new DateTime(&#8216;1981-02-13&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>-&gt;hasDate(&#8216;1981&#8217;, &#8216;02&#8217;, &#8216;13&#8217;)   // passe
-&gt;hasDate(&#8216;1981&#8217;, &#8216;2&#8217;,  &#8216;13&#8217;)   // passe
-&gt;hasDate(1981,   2,    13)     // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id30">
<h1>;<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h1>
<p>====hasDateAndTime====dateTimeHasDateAndTime</p>
<p>##hasDateAndTime## vérifie la date et l’horaire de l’objet ##DateTime##</p>
<p>[[[php
$dt = new DateTime(&#8216;1981-02-13 01:02:03&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>// passe
-&gt;hasDateAndTime(&#8216;1981&#8217;, &#8216;02&#8217;, &#8216;13&#8217;, &#8216;01&#8217;, &#8216;02&#8217;, &#8216;03&#8217;)
// passe
-&gt;hasDateAndTime(&#8216;1981&#8217;, &#8216;2&#8217;,  &#8216;13&#8217;, &#8216;1&#8217;,  &#8216;2&#8217;,  &#8216;3&#8217;)
// passe
-&gt;hasDateAndTime(1981,   2,    13,   1,    2,    3)</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id31">
<h1>;<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h1>
<p>====hasDay====dateTimeHasDay</p>
<p>##hasDay## vérifie le jour de l’objet ##DateTime##.</p>
<p>[[[php
$dt = new DateTime(&#8216;1981-02-13&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>-&gt;hasDay(13)        // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id32">
<h1>;<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h1>
<p>====hasHours====dateTimeHasHours</p>
<p>##hasHours## vérifie les heures de l’objet ##DateTime##.</p>
<p>[[[php
$dt = new DateTime(&#8216;01:02:03&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>-&gt;hasHours(&#8216;01&#8217;)    // passe
-&gt;hasHours(&#8216;1&#8217;)     // passe
-&gt;hasHours(1)       // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id33">
<h1>;<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h1>
<p>====hasMinutes====dateTimeHasMinutes</p>
<p>##hasMinutes## vérifie les minutes de l’objet ##DateTime##.</p>
<p>[[[php
$dt = new DateTime(&#8216;01:02:03&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>-&gt;hasMinutes(&#8216;02&#8217;)  // passe
-&gt;hasMinutes(&#8216;2&#8217;)   // passe
-&gt;hasMinutes(2)     // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id34">
<h1>;<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h1>
<p>====hasMonth====dateTimeHasMonth</p>
<p>##hasMonth## vérifie le mois de l’objet ##DateTime##.</p>
<p>[[[php
$dt = new DateTime(&#8216;1981-02-13&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>-&gt;hasMonth(2)       // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id35">
<h1>;<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h1>
<p>====hasSeconds====dateTimeHasSeconds</p>
<p>##hasSeconds## vérifie les secondes de l’objet ##DateTime##.</p>
<p>[[[php
$dt = new DateTime(&#8216;01:02:03&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>-&gt;hasSeconds(&#8216;03&#8217;)    // passe
-&gt;hasSeconds(&#8216;3&#8217;)     // passe
-&gt;hasSeconds(3)       // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id36">
<h1>;<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h1>
<p>====hasTime====dateTimeHasTime</p>
<p>##hasTime## vérifie la partie horaire de l’objet ##DateTime##</p>
<p>[[[php
$dt = new DateTime(&#8216;01:02:03&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>-&gt;hasTime(&#8216;01&#8217;, &#8216;02&#8217;, &#8216;03&#8217;)     // passe
-&gt;hasTime(&#8216;1&#8217;,  &#8216;2&#8217;,  &#8216;3&#8217;)      // passe
-&gt;hasTime(1,    2,    3)        // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id37">
<h1>;<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h1>
<p>====hasTimezone====dateTimeHasTimezone</p>
<p>##hasTimezone## vérifie le fuseau horaire de l’objet ##DateTime##.</p>
<p>[[[php
$dt = new DateTime();</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>-&gt;hasTimezone(&#8216;Europe/Paris&#8217;)</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id38">
<h1>;<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h1>
<p>====hasYear====dateTimeHasYear</p>
<p>##hasYear## vérifie l’année de l’objet ##DateTime##.</p>
<p>[[[php
$dt = new DateTime(&#8216;1981-02-13&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;dateTime($dt)</dt>
<dd>-&gt;hasYear(1981)     // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id39">
<h1>;<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h1>
<p>====isCloneOf====dateTimeIsCloneOf</p>
<p>{{{inheritance
##isCloneOf## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isCloneOf##|#objectIsCloneOf]]
}}}</p>
<p>====isEqualTo====dateTimeIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isEqualTo##|#objectIsEqualTo]]
}}}</p>
<p>====isIdenticalTo====datTimeIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isIdenticalTo##|#objectIsIdenticalTo]]
}}}</p>
<p>====isInstanceOf====dateTimeIsInstanceOf</p>
<p>{{{inheritance
##isInstanceOf## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isInstanceOf##|#objectIsInstanceOf]]
}}}</p>
<p>====isNotEqualTo====dateTimeIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isNotEqualTo##|#objectIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====dateTimeIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isNotIdenticalTo##|#objectIsNotIdenticalTo]]
}}}</p>
<p>===mysqlDateTime</p>
<p>C’est l’assertion dédiée aux objets décrivant une date MySQL et basée sur l’objet ##[[DateTime|http://php.net/datetime]]##.</p>
<p>Les dates doivent utiliser un format compatible avec MySQL et de nombreux autre ??SGBD|Système de gestion de base de données??), à savoir «&nbsp;Y-m-d H:i:s&nbsp;» (reportez-vous à la documentation de la fonction ##[[date()|http://php.net/date]]## du manuel de PHP pour plus d’information).</p>
<p>Si vous essayez de tester une variable qui n’est pas un objet ##DateTime## (ou une classe qui l’étend) avec cette assertion, cela échouera.</p>
<p>====hasDate====mysqlDateTimeHasDate</p>
<p>{{{inheritance
##hasDate## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasDate##|#dateTimeHasDate]]
}}}</p>
<p>====hasDateAndTime====mysqlDateTimeHasDateAndTime</p>
<p>{{{inheritance
##hasDateAndTime## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasDateAndTime##|#dateTimeHasDateAndTime]]
}}}</p>
<p>====hasDay====mysqlDateTimeHasDay</p>
<p>{{{inheritance
##hasDay## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasDay##|#dateTimeHasDay]]
}}}</p>
<p>====hasHours====mysqlDateTimeHasHours</p>
<p>{{{inheritance
##hasHours## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasHours##|#dateTimeHasHours]]
}}}</p>
<p>====hasMinutes====mysqlDateTimeHasMinutes</p>
<p>{{{inheritance
##hasMinutes## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasMinutes##|#dateTimeHasMinutes]]
}}}</p>
<p>====hasMonth====mysqlDateTimeHasMonth</p>
<p>{{{inheritance
##hasMonth## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasMonth##|#dateTimeHasMonth]]
}}}</p>
<p>====hasSeconds====mysqlDateTimeHasSeconds</p>
<p>{{{inheritance
##hasSeconds## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasSeconds##|#dateTimeHasSeconds]]
}}}</p>
<p>====hasTime====mysqlDateTimeHasTime</p>
<p>{{{inheritance
##hasTime## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasTime##|#dateTimeHasTime]]
}}}</p>
<p>====hasTimezone====mysqlDateTimeHasTimezone</p>
<p>{{{inheritance
##hasTimezone## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasTimezone##|#dateTimeHasTimezone]]
}}}</p>
<p>====hasYear====mysqlDateTimeHasYear</p>
<p>{{{inheritance
##hasYear## est une méthode héritée de l’asserter ##dateTime##.
Pour plus d’informations, reportez-vous à la documentation de [[##dateTime::hasYear##|#dateTimeHasTimezone]]
}}}</p>
<p>====isCloneOf====mysqlDateTimeIsCloneOf</p>
<p>{{{inheritance
##isCloneOf## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isCloneOf##|#objectIsCloneOf]]
}}}</p>
<p>====isEqualTo====mysqlDateTimeIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isEqualTo##|#objectIsEqualTo]]
}}}</p>
<p>====isIdenticalTo====mysqlDateTimeIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isIdenticalTo##|#objectIsIdenticalTo]]
}}}</p>
<p>====isInstanceOf====mysqlDateTimeIsInstanceOf</p>
<p>{{{inheritance
##isInstanceOf## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isInstanceOf##|#objectIsInstanceOf]]
}}}</p>
<p>====isNotEqualTo====mysqlDateTimeIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isNotEqualTo##|#objectIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====mysqlDateTimeIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isNotIdenticalTo##|#objectIsNotIdenticalTo]]
}}}</p>
<p>===exception</p>
<p>C’est l’assertion dédiée aux exceptions.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;exception(</dt>
<dd><dl class="first docutils">
<dt>function() use($myObject) {</dt>
<dd>// ce code lève une exception: throw new Exception;
$myObject-&gt;doOneThing(&#8216;wrongParameter&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</div>
<div class="section" id="id40">
<h1>;<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h1>
<p>{{{info
La syntaxe utilise les fonctions anonymes (aussi appelées fermetures ou closures) introduites en PHP 5.3. Reportez-vous au [[manuel de PHP|http://php.net/functions.anonymous]] pour avoir plus d’informations sur le sujet.
}}}</p>
<p>====hasCode</p>
<p>##hasCode## vérifie le code de l’exception.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;exception(</dt>
<dd><dl class="first docutils">
<dt>function() use($myObject) {</dt>
<dd>// ce code lève une exception: throw new Exception(&#8216;Message&#8217;, 42);
$myObject-&gt;doOneThing(&#8216;wrongParameter&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd>-&gt;hasCode(42)</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id41">
<h1>;<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h1>
<p>====hasDefaultCode</p>
<p>##hasDefaultCode## vérifie que le code de l’exception est la valeur par défaut, c’est-à-dire 0.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;exception(</dt>
<dd><dl class="first docutils">
<dt>function() use($myObject) {</dt>
<dd>// ce code lève une exception: throw new Exception;
$myObject-&gt;doOneThing(&#8216;wrongParameter&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd>-&gt;hasDefaultCode()</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id42">
<h1>;<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##hasDefaultCode## est équivalent à ##hasCode(0)##.
}}}</p>
<p>====hasMessage</p>
<p>##hasMessage## vérifie le message de l’exception.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;exception(</dt>
<dd><dl class="first docutils">
<dt>function() use($myObject) {</dt>
<dd>// ce code lève une exception: throw new Exception(&#8216;Message&#8217;);
$myObject-&gt;doOneThing(&#8216;wrongParameter&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd>-&gt;hasMessage(&#8216;Message&#8217;)     // passe
-&gt;hasMessage(&#8216;message&#8217;)     // échoue</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id43">
<h1>;<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h1>
<p>====hasNestedException</p>
<p>##hasNestedException## vérifie que l’exception contient une référence vers l’exception précédente. Si l’exception est précisée, cela va également vérifier la classe de l’exception.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;exception(</dt>
<dd><dl class="first docutils">
<dt>function() use($myObject) {</dt>
<dd>// ce code lève une exception: throw new Exception(&#8216;Message&#8217;);
$myObject-&gt;doOneThing(&#8216;wrongParameter&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd>-&gt;hasNestedException()      // échoue</dd>
<dt>-&gt;exception(</dt>
<dd><dl class="first docutils">
<dt>function() use($myObject) {</dt>
<dd><dl class="first docutils">
<dt>try {</dt>
<dd>// ce code lève une exception: throw new FirstException(&#8216;Message 1&#8217;, 42);
$myObject-&gt;doOneThing(&#8216;wrongParameter&#8217;);</dd>
</dl>
<p>}
// ... l&#8217;exception est attrapée...
catch(FirstException $e) {</p>
<blockquote>
<div>// ... puis relancée, encapsulée dans une seconde exception
throw new SecondException(&#8216;Message 2&#8217;, 24, $e);</div></blockquote>
<p class="last">}</p>
</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd><p class="first">-&gt;isInstanceOf(&#8216;FirstException&#8217;)           // échoue
-&gt;isInstanceOf(&#8216;SecondException&#8217;)          // passe</p>
<p class="last">-&gt;hasNestedException()                      // passe
-&gt;hasNestedException(new FirstException)   // passe
-&gt;hasNestedException(new SecondException)  // échoue</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id44">
<h1>;<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h1>
<p>====isCloneOf====exceptionIsCloneOf</p>
<p>{{{inheritance
##isCloneOf## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isCloneOf##|#objectIsCloneOf]]
}}}</p>
<p>====isEqualTo====exceptionIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isEqualTo##|#objectIsEqualTo]]
}}}</p>
<p>====isIdenticalTo====exceptionIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isIdenticalTo##|#objectIsIdenticalTo]]
}}}</p>
<p>====isInstanceOf====exceptionIsInstanceOf</p>
<p>{{{inheritance
##isInstanceOf## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isInstanceOf##|#objectIsInstanceOf]]
}}}</p>
<p>====isNotEqualTo====exceptionIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isNotEqualTo##|#objectIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====exceptionIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##object##.
Pour plus d’informations, reportez-vous à la documentation de [[##object::isNotIdenticalTo##|#objectIsNotIdenticalTo]]
}}}</p>
<p>====message</p>
<p>##message## vous permet de récupérer un asserter de type ##[[string|#string]]## contenant le message de l&#8217;exception testée.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;exception(</dt>
<dd><dl class="first docutils">
<dt>function() {</dt>
<dd>throw new Exception(&#8216;My custom message to test&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;message</dt>
<dd>-&gt;contains(&#8216;message&#8217;)</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id45">
<h1>;<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h1>
<p>===array</p>
<p>C’est l’assertion dédiée aux tableaux.</p>
<p>{{{info
##array## étant un mot réservé en PHP, il n’a pas été possible de créer une assertion ##array##. Elle s’appelle donc ##phpArray## et un alias ##array## a été créé. Vous pourrez donc rencontrer des ##-&gt;phpArray()## ou des ##-&gt;array()##.
}}}</p>
<p>Il est conseillé d’utiliser exclusivement ##-&gt;array()## afin de simplifier la lecture des tests.</p>
<p>====contains====arrayContains</p>
<p>##contains## vérifie qu’un tableau contient une certaine donnée.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd>-&gt;contains(&#8216;1&#8217;)     // passe
-&gt;contains(1)       // passe, ne vérifie pas...
-&gt;contains(&#8216;2&#8217;)     // ... le type de la donnée
-&gt;contains(10)      // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id46">
<h1>;<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##contains## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##contains## ne teste pas le type de la donnée. Si vous souhaitez vérifier également son type, utilisez ##[[strictlyContains|#strictlyContains]]##.
}}}</p>
<p>====containsValues</p>
<p>##containsValues## vérifie qu’un tableau contient toutes les données fournies dans un tableau.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($array)</dt>
<dd>-&gt;containsValues(array(1, 2, 3))        // passe
-&gt;containsValues(array(&#8216;5&#8217;, &#8216;8&#8217;, &#8216;13&#8217;)) // passe
-&gt;containsValues(array(0, 1, 2))        // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id47">
<h1>;<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##containsValues## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##containsValues## ne teste pas le type des données. Si vous souhaitez vérifier également leurs types, utilisez ##[[strictlyContainsValues|#strictlyContainsValues]]##.
}}}</p>
<p>====hasKey</p>
<p>##hasKey## vérifie qu’un tableau contient une certaine clef.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);
$atoum     = array(</p>
<blockquote>
<div>&#8216;name&#8217;        =&gt; &#8216;atoum&#8217;,
&#8216;owner&#8217;       =&gt; &#8216;mageekguy&#8217;,</div></blockquote>
<p>);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd>-&gt;hasKey(0)         // passe
-&gt;hasKey(1)         // passe
-&gt;hasKey(&#8216;1&#8217;)       // passe
-&gt;hasKey(10)        // échoue</dd>
<dt>-&gt;array($atoum)</dt>
<dd>-&gt;hasKey(&#8216;name&#8217;)    // passe
-&gt;hasKey(&#8216;price&#8217;)   // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id48">
<h1>;<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##hasKey## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##hasKey## ne teste pas le type des clefs.
}}}</p>
<p>====hasKeys</p>
<p>##hasKeys## vérifie qu’un tableau contient toutes les clefs fournies dans un tableau.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);
$atoum     = array(</p>
<blockquote>
<div>&#8216;name&#8217;        =&gt; &#8216;atoum&#8217;,
&#8216;owner&#8217;       =&gt; &#8216;mageekguy&#8217;,</div></blockquote>
<p>);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd>-&gt;hasKeys(array(0, 2, 4))           // passe
-&gt;hasKeys(array(&#8216;0&#8217;, 2))            // passe
-&gt;hasKeys(array(&#8216;4&#8217;, 0, 3))         // passe
-&gt;hasKeys(array(0, 3, 10))          // échoue</dd>
<dt>-&gt;array($atoum)</dt>
<dd>-&gt;hasKeys(array(&#8216;name&#8217;, &#8216;owner&#8217;))   // passe
-&gt;hasKeys(array(&#8216;name&#8217;, &#8216;price&#8217;))   // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id49">
<h1>;<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##hasKeys## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##hasKeys## ne teste pas le type des clefs.
}}}</p>
<p>====hasSize====arrayHasSize</p>
<p>##hasSize## vérifie la taille d’un tableau.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd>-&gt;hasSize(7)        // passe
-&gt;hasSize(10)       // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id50">
<h1>;<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##hasSize## n’est pas récursif.
}}}</p>
<p>====isEmpty====arrayIsEmpty</p>
<p>##isEmpty## vérifie qu’un tableau est vide.</p>
<p>[[[php
$emptyArray    = array();
$nonEmptyArray = array(null, null);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($emptyArray)</dt>
<dd>-&gt;isEmpty()         // passe</dd>
<dt>-&gt;array($nonEmptyArray)</dt>
<dd>-&gt;isEmpty()         // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id51">
<h1>;<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h1>
<p>====isEqualTo====arrayIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isIdenticalTo====arrayIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isNotEmpty====arrayIsNotEmpty</p>
<p>##isNotEmpty## vérifie qu’un tableau n’est pas vide.</p>
<p>[[[php
$emptyArray    = array();
$nonEmptyArray = array(null, null);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($emptyArray)</dt>
<dd>-&gt;isNotEmpty()      // échoue</dd>
<dt>-&gt;array($nonEmptyArray)</dt>
<dd>-&gt;isNotEmpty()      // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id52">
<h1>;<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h1>
<p>====isNotEqualTo====arrayIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====arrayIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====keys</p>
<p>##keys## vous permet de récupérer un asserter de type ##[[array|#array]]## contenant les clefs du tableau testé.</p>
<p>[[[php
$atoum = array(</p>
<blockquote>
<div>&#8216;name&#8217;  =&gt; &#8216;atoum&#8217;,
&#8216;owner&#8217; =&gt; &#8216;mageekguy&#8217;,</div></blockquote>
<p>);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($atoum)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;keys</dt>
<dd><dl class="first docutils">
<dt>-&gt;isEqualTo(</dt>
<dd><dl class="first docutils">
<dt>array(</dt>
<dd>&#8216;name&#8217;,
&#8216;owner&#8217;,</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
<p class="last">)</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id53">
<h1>;<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h1>
<p>====notContains====arrayNotContains</p>
<p>##notContains## vérifie qu’un tableau ne contient pas une donnée.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd>-&gt;notContains(null)         // passe
-&gt;notContains(1)            // échoue
-&gt;notContains(10)           // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id54">
<h1>;<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##notContains## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##notContains## ne teste pas le type de la donnée. Si vous souhaitez vérifier également son type, utilisez ##[[strictlyNotContains|#strictlyNotContains]]##.
}}}</p>
<p>====notContainsValues</p>
<p>##notContainsValues## vérifie qu’un tableau ne contient aucune des données fournies dans un tableau.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($array)</dt>
<dd>-&gt;notContainsValues(array(1, 4, 10))    // échoue
-&gt;notContainsValues(array(4, 10, 34))   // passe
-&gt;notContainsValues(array(1, &#8216;2&#8217;, 3))   // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id55">
<h1>;<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##notContainsValues## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##notContainsValues## ne teste pas le type des données. Si vous souhaitez vérifier également leurs types, utilisez ##[[strictlyNotContainsValues|#strictlyNotContainsValues]]##.
}}}</p>
<p>====notHasKey</p>
<p>##notHasKey## vérifie qu’un tableau ne contient pas une certaine clef.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);
$atoum     = array(</p>
<blockquote>
<div>&#8216;name&#8217;  =&gt; &#8216;atoum&#8217;,
&#8216;owner&#8217; =&gt; &#8216;mageekguy&#8217;,</div></blockquote>
<p>);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd>-&gt;notHasKey(0)          // échoue
-&gt;notHasKey(1)          // échoue
-&gt;notHasKey(&#8216;1&#8217;)        // échoue
-&gt;notHasKey(10)         // passe</dd>
<dt>-&gt;array($atoum)</dt>
<dd>-&gt;notHasKey(&#8216;name&#8217;)     // échoue
-&gt;notHasKey(&#8216;price&#8217;)    // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id56">
<h1>;<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##notHasKey## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##notHasKey## ne teste pas le type des clefs.
}}}</p>
<p>====notHasKeys</p>
<p>##notHasKeys## vérifie qu’un tableau ne contient aucune des clefs fournies dans un tableau.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);
$atoum     = array(</p>
<blockquote>
<div>&#8216;name&#8217;        =&gt; &#8216;atoum&#8217;,
&#8216;owner&#8217;       =&gt; &#8216;mageekguy&#8217;,</div></blockquote>
<p>);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd>-&gt;notHasKeys(array(0, 2, 4))            // échoue
-&gt;notHasKeys(array(&#8216;0&#8217;, 2))             // échoue
-&gt;notHasKeys(array(&#8216;4&#8217;, 0, 3))          // échoue
-&gt;notHasKeys(array(10, 11, 12))         // passe</dd>
<dt>-&gt;array($atoum)</dt>
<dd>-&gt;notHasKeys(array(&#8216;name&#8217;, &#8216;owner&#8217;))    // échoue
-&gt;notHasKeys(array(&#8216;foo&#8217;, &#8216;price&#8217;))     // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id57">
<h1>;<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##notHasKeys## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##notHasKeys## ne teste pas le type des clefs.
}}}</p>
<p>====size</p>
<p>##size## vous permet de récupérer un asserter de type ##[[integer|#integer]]## contenant la taille du tableau testé.</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;size</dt>
<dd>-&gt;isGreaterThan(5)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id58">
<h1>;<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h1>
<p>====strictlyContains</p>
<p>##strictlyContains## vérifie qu’un tableau contient une certaine donnée (même valeur et même type).</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd>-&gt;strictlyContains(&#8216;1&#8217;)     // passe
-&gt;strictlyContains(1)       // échoue
-&gt;strictlyContains(&#8216;2&#8217;)     // échoue
-&gt;strictlyContains(2)       // passe
-&gt;strictlyContains(10)      // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id59">
<h1>;<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##strictlyContains## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##strictlyContains## teste le type de la donnée. Si vous ne souhaitez pas vérifier son type, utilisez ##[[contains|#arrayContains]]##.
}}}</p>
<p>====strictlyContainsValues</p>
<p>##strictlyContainsValues## vérifie qu’un tableau contient toutes les données fournies dans un tableau (même valeur et même type).</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($array)</dt>
<dd>-&gt;strictlyContainsValues(array(&#8216;1&#8217;, 2, &#8216;3&#8217;))    // passe
-&gt;strictlyContainsValues(array(1, 2, 3))        // échoue
-&gt;strictlyContainsValues(array(5, &#8216;8&#8217;, 13))     // passe
-&gt;strictlyContainsValues(array(&#8216;5&#8217;, &#8216;8&#8217;, &#8216;13&#8217;)) // échoue
-&gt;strictlyContainsValues(array(0, &#8216;1&#8217;, 2))      // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id60">
<h1>;<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##strictlyContainsValues## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##strictlyContainsValues## teste le type des données. Si vous ne souhaitez pas vérifier leurs types, utilisez ##[[containsValues|#containsValues]]##.
}}}</p>
<p>====strictlyNotContains</p>
<p>##strictlyNotContains## vérifie qu’un tableau ne contient pas une donnée (même valeur et même type).</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($fibonacci)</dt>
<dd>-&gt;strictlyNotContains(null)         // passe
-&gt;strictlyNotContains(&#8216;1&#8217;)          // échoue
-&gt;strictlyNotContains(1)            // passe
-&gt;strictlyNotContains(10)           // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id61">
<h1>;<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##strictlyNotContains## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##strictlyNotContains## teste le type de la donnée. Si vous ne souhaitez pas vérifier son type, utilisez ##[[notContains|#arrayNotContains]]##.
}}}</p>
<p>====strictlyNotContainsValues</p>
<p>##strictlyNotContainsValues## vérifie qu’un tableau ne contient aucune des données fournies dans un tableau (même valeur et même type).</p>
<p>[[[php
$fibonacci = array(&#8216;1&#8217;, 2, &#8216;3&#8217;, 5, &#8216;8&#8217;, 13, &#8216;21&#8217;);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;array($array)</dt>
<dd>-&gt;strictlyNotContainsValues(array(&#8216;1&#8217;, 4, 10))  // échoue
-&gt;strictlyNotContainsValues(array(1, 4, 10))    // passe
-&gt;strictlyNotContainsValues(array(4, 10, 34))   // passe
-&gt;strictlyNotContainsValues(array(&#8216;1&#8217;, 2, &#8216;3&#8217;)) // échoue
-&gt;strictlyNotContainsValues(array(1, &#8216;2&#8217;, 3))   // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id62">
<h1>;<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##strictlyNotContainsValues## ne fait pas de recherche récursive.
}}}</p>
<p>{{{warning
##strictlyNotContainsValues## teste le type des données. Si vous ne souhaitez pas vérifier leurs types, utilisez ##[[notContainsValues|#notContainsValues]]##.
}}}</p>
<p>===string</p>
<p>C’est l’assertion dédiée aux chaînes de caractères.</p>
<p>====contains====stringContains</p>
<p>##contains## vérifie qu’une chaîne de caractère contient une autre chaîne de caractère donnée.</p>
<p>[[[php
$string = &#8216;Hello world&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;string($string)</dt>
<dd>-&gt;contains(&#8216;ll&#8217;)    // passe
-&gt;contains(&#8216; &#8216;)     // passe
-&gt;contains(&#8216;php&#8217;)   // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id63">
<h1>;<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h1>
<p>====hasLength====stringHasLength</p>
<p>##hasLength## vérifie la taille d’une chaîne de caractères.</p>
<p>[[[php
$string = &#8216;Hello world&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;string($string)</dt>
<dd>-&gt;hasLength(11)     // passe
-&gt;hasLength(20)     // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id64">
<h1>;<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h1>
<p>====hasLengthGreaterThan====stringHasLengthGreaterThan</p>
<p>##hasLengthGreaterThan## vérifie que la taille d’une chaîne de caractères est plus grande qu’une valeur donnée.</p>
<p>[[[php
$string = &#8216;Hello world&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;string($string)</dt>
<dd>-&gt;hasLengthGreaterThan(10)     // passe
-&gt;hasLengthGreaterThan(20)     // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id65">
<h1>;<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h1>
<p>====hasLengthLessThan====stringHasLengthLessThan</p>
<p>##hasLengthLessThan## vérifie que la taille d’une chaîne de caractères est plus petite qu’une valeur donnée.</p>
<p>[[[php
$string = &#8216;Hello world&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;string($string)</dt>
<dd>-&gt;hasLengthLessThan(20)     // passe
-&gt;hasLengthLessThan(10)     // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id66">
<h1>;<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h1>
<p>====isEmpty====stringIsEmpty</p>
<p>##isEmpty## vérifie qu’une chaîne de caractères est vide.</p>
<p>[[[php
$emptyString    = &#8216;&#8217;;
$nonEmptyString = &#8216;atoum&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;string($emptyString)</dt>
<dd>-&gt;isEmpty()             // passe</dd>
<dt>-&gt;string($nonEmptyString)</dt>
<dd>-&gt;isEmpty()             // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id67">
<h1>;<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h1>
<p>====isEqualTo====stringIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isEqualToContentsOfFile====stringIsEqualToContentsOfFile</p>
<p>##isEqualToContentsOfFile## vérifie qu’une chaîne de caractère est égale au contenu d’un fichier donné par son chemin.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;string($string)</dt>
<dd>-&gt;isEqualToContentsOfFile(&#8216;/path/to/file&#8217;)</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id68">
<h1>;<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h1>
<p>{{{info
si le fichier n’existe pas, le test échoue.
}}}</p>
<p>====isIdenticalTo====stringIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isNotEmpty====stringIsNotEmpty</p>
<p>##isNotEmpty## vérifie qu’une chaîne de caractères n’est pas vide.</p>
<p>[[[php
$emptyString    = &#8216;&#8217;;
$nonEmptyString = &#8216;atoum&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;string($emptyString)</dt>
<dd>-&gt;isNotEmpty()          // échoue</dd>
<dt>-&gt;string($nonEmptyString)</dt>
<dd>-&gt;isNotEmpty()          // passe</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id69">
<h1>;<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h1>
<p>====isNotEqualTo====stringIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====stringIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====length</p>
<p>##length## vous permet de récupérer un asserter de type ##[[integer|#integer]]## contenant la taille de la chaîne de caractères testée.</p>
<p>[[[php
$string = &#8216;atoum&#8217;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;string($string)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;length</dt>
<dd>-&gt;isGreaterThanOrEqualTo(5)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id70">
<h1>;<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h1>
<p>====match====stringMatch</p>
<p>##match## vérifie qu’une expression régulière correspond à la chaîne de caractères.</p>
<p>[[[php
$phone = &#8216;0102030405&#8217;;
$vdm   = &#8220;Aujourd&#8217;hui, à 57 ans, mon père s&#8217;est fait tatouer une licorne sur l&#8217;épaule. VDM&#8221;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;string($phone)</dt>
<dd>-&gt;match(&#8216;#^0[1-9]d{8}$#&#8217;)</dd>
<dt>-&gt;string($vdm)</dt>
<dd>-&gt;match(&#8220;#^Aujourd&#8217;hui.*VDM$#&#8221;)</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id71">
<h1>;<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h1>
<p>====notContains====stringNotContains</p>
<p>##notContains## vérifie qu’une chaîne de caractère ne contient pas une autre chaîne de caractère donnée.</p>
<p>[[[php
$string = &#8216;Hello world&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;string($string)</dt>
<dd>-&gt;notContains(&#8216;php&#8217;)   // passe
-&gt;notContains(&#8216;;&#8217;)     // passe
-&gt;notContains(&#8216;ll&#8217;)    // échoue
-&gt;notContains(&#8216; &#8216;)     // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id72">
<h1>;<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h1>
<p>===castToString</p>
<p>C’est l’assertion dédiée aux tests sur le transtypage d’objets en chaîne de caractères.</p>
<p>[[[php
class AtoumVersion {</p>
<blockquote>
<div><p>private $version = &#8216;1.0&#8217;;</p>
<dl class="docutils">
<dt>public function __toString() {</dt>
<dd>return &#8216;atoum v&#8217; . $this-&gt;version;</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>}</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;castToString(new AtoumVersion())</dt>
<dd>-&gt;isEqualTo(&#8216;atoum v1.0&#8217;)</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id73">
<h1>;<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h1>
<p>====contains====castToStringContains</p>
<p>{{{inheritance
##contains## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::contains##|#stringContains]]
}}}</p>
<p>====notContains====castToStringNotContains</p>
<p>{{{inheritance
##notContains## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::notContains##|#stringNotContains]]
}}}</p>
<p>====hasLength====castToStringHasLength</p>
<p>{{{inheritance
##hasLength## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::hasLength##|#stringHasLength]]
}}}</p>
<p>====hasLengthGreaterThan====castToStringHasLengthGreaterThan</p>
<p>{{{inheritance
##hasLengthGreaterThan## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::hasLengthGreaterThan##|#stringHasLengthGreaterThan]]
}}}</p>
<p>====hasLengthLessThan====castToStringHasLengthLessThan</p>
<p>{{{inheritance
##hasLengthLessThan## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::hasLengthLessThan##|#stringHasLengthLessThan]]
}}}</p>
<p>====isEmpty====castToStringIsEmpty</p>
<p>{{{inheritance
##isEmpty## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isEmpty##|#stringIsEmpty]]
}}}</p>
<p>====isEqualTo====castToStringIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isEqualToContentsOfFile====castToStringIsEqualToContentsOfFile</p>
<p>{{{inheritance
##isEqualToContentsOfFile## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isEqualToContentsOfFile##|#stringIsEqualToContentsOfFile]]
}}}</p>
<p>====isIdenticalTo====castToStringIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isNotEmpty====castToStringIsNotEmpty</p>
<p>{{{inheritance
##isNotEmpty## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isNotEmpty##|#stringIsNotEmpty]]
}}}</p>
<p>====isNotEqualTo====castToStringIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====castToStringIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====match====castToStringMatch</p>
<p>{{{inheritance
##match## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::match##|#stringMatch]]
}}}</p>
<p>===hash</p>
<p>C’est l’assertion dédiée aux tests sur les hashs (empreintes numériques).</p>
<p>====contains====hashContains</p>
<p>{{{inheritance
##contains## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::contains##|#stringContains]]
}}}</p>
<p>====isEqualTo====hashIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isEqualToContentsOfFile====hashIsEqualToContentsOfFile</p>
<p>{{{inheritance
##isEqualToContentsOfFile## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isEqualToContentsOfFile##|#stringIsEqualToContentsOfFile]]
}}}</p>
<p>====isIdenticalTo====hashIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isMd5</p>
<p>##isMd5## vérifie que la chaîne de caractère est au format ##md5##, c’est-à-dire une chaîne hexadécimale de 32 caractères.</p>
<p>[[[php
$hash    = hash(&#8216;md5&#8217;, &#8216;atoum&#8217;);
$notHash = &#8216;atoum&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;hash($hash)</dt>
<dd>-&gt;isMd5()       // passe</dd>
<dt>-&gt;hash($notHash)</dt>
<dd>-&gt;isMd5()       // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id74">
<h1>;<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h1>
<p>====isNotEqualTo====hashIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====hashIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====isSha1</p>
<p>##isSha1## vérifie que la chaîne de caractère est au format ##sha1##, c’est-à-dire une chaîne hexadécimale de 40 caractères.</p>
<p>[[[php
$hash    = hash(&#8216;sha1&#8217;, &#8216;atoum&#8217;);
$notHash = &#8216;atoum&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;hash($hash)</dt>
<dd>-&gt;isSha1()      // passe</dd>
<dt>-&gt;hash($notHash)</dt>
<dd>-&gt;isSha1()      // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id75">
<h1>;<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h1>
<p>====isSha256</p>
<p>##isSha256## vérifie que la chaîne de caractère est au format ##sha256##, c’est-à-dire une chaîne hexadécimale de 64 caractères.</p>
<p>[[[php
$hash    = hash(&#8216;sha256&#8217;, &#8216;atoum&#8217;);
$notHash = &#8216;atoum&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;hash($hash)</dt>
<dd>-&gt;isSha256()    // passe</dd>
<dt>-&gt;hash($notHash)</dt>
<dd>-&gt;isSha256()    // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id76">
<h1>;<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h1>
<p>====isSha512</p>
<p>##isSha512## vérifie que la chaîne de caractère est au format ##sha512##, c’est-à-dire une chaîne hexadécimale de 128 caractères.</p>
<p>[[[php
$hash    = hash(&#8216;sha512&#8217;, &#8216;atoum&#8217;);
$notHash = &#8216;atoum&#8217;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;hash($hash)</dt>
<dd>-&gt;isSha512()    // passe</dd>
<dt>-&gt;hash($notHash)</dt>
<dd>-&gt;isSha512()    // échoue</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id77">
<h1>;<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h1>
<p>====notContains====hashNotContains</p>
<p>{{{inheritance
##notContains## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::notContains##|#stringNotContains]]
}}}</p>
<p>===output</p>
<p>C’est l’assertion dédiée aux tests sur les sorties, c’est-à-dire tout ce qui est censé être affiché à l’écran.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;output(</dt>
<dd><dl class="first docutils">
<dt>function() {</dt>
<dd>echo &#8216;Hello world&#8217;;</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
</div>
<div class="section" id="id78">
<h1>;<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h1>
<p>{{{info
La syntaxe utilise les fonctions anonymes (aussi appelées fermetures ou closures) introduites en PHP 5.3. Reportez-vous au [[manuel de PHP|http://php.net/functions.anonymous]] pour avoir plus d’informations sur le sujet.
}}}</p>
<p>====contains====outputContains</p>
<p>{{{inheritance
##contains## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::contains##|#stringContains]]
}}}</p>
<p>====hasLength====outputHasLength</p>
<p>{{{inheritance
##hasLength## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::hasLength##|#stringHasLength]]
}}}</p>
<p>====hasLengthGreaterThan====outputHasLengthGreaterThan</p>
<p>{{{inheritance
##hasLengthGreaterThan## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::hasLengthGreaterThan##|#stringHasLengthGreaterThan]]
}}}</p>
<p>====hasLengthLessThan====outputHasLengthLessThan</p>
<p>{{{inheritance
##hasLengthLessThan## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::hasLengthLessThan##|#stringHasLengthLessThan]]
}}}</p>
<p>====isEmpty====outputIsEmpty</p>
<p>{{{inheritance
##isEmpty## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isEmpty##|#stringIsEmpty]]
}}}</p>
<p>====isEqualTo====outputIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isEqualToContentsOfFile====outputIsEqualToContentsOfFile</p>
<p>{{{inheritance
##isEqualToContentsOfFile## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isEqualToContentsOfFile##|#stringIsEqualToContentsOfFile]]
}}}</p>
<p>====isIdenticalTo====outputIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isNotEmpty====outputIsNotEmpty</p>
<p>{{{inheritance
##isNotEmpty## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isNotEmpty##|#stringIsNotEmpty]]
}}}</p>
<p>====isNotEqualTo====outputIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====outputIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====match====outputMatch</p>
<p>{{{inheritance
##match## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::match##|#stringMatch]]
}}}</p>
<p>====notContains====outputNotContains</p>
<p>{{{inheritance
##notContains## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::notContains##|#stringNotContains]]
}}}</p>
<p>===utf8String</p>
<p>C’est l’assertion dédiée aux chaînes de caractères UTF-8.</p>
<p>{{{info
##utf8Strings## utilise les fonctions ##mb_*## pour gérer les chaînes multi-octets. Reportez-vous au manuel de PHP pour avoir plus d’information sur l’extension ##[[mbstring|http://php.net/mbstring]]##.
}}}</p>
<p>====contains====utf8StringContains</p>
<p>{{{inheritance
##contains## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::contains##|#stringContains]]
}}}</p>
<p>====hasLength====utf8StringHasLength</p>
<p>{{{inheritance
##hasLength## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::hasLength##|#stringHasLength]]
}}}</p>
<p>====hasLengthGreaterThan====utf8StringHasLengthGreaterThan</p>
<p>{{{inheritance
##hasLengthGreaterThan## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::hasLengthGreaterThan##|#stringHasLengthGreaterThan]]
}}}</p>
<p>====hasLengthLessThan====utf8StringHasLengthLessThan</p>
<p>{{{inheritance
##hasLengthLessThan## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::hasLengthLessThan##|#stringHasLengthLessThan]]
}}}</p>
<p>====isEmpty====utf8StringIsEmpty</p>
<p>{{{inheritance
##isEmpty## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isEmpty##|#stringIsEmpty]]
}}}</p>
<p>====isEqualTo====utf8StringIsEqualTo</p>
<p>{{{inheritance
##isEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isEqualTo##|#variableIsEqualTo]]
}}}</p>
<p>====isEqualToContentsOfFile====utf8StringIsEqualToContentsOfFile</p>
<p>{{{inheritance
##isEqualToContentsOfFile## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isEqualToContentsOfFile##|#stringIsEqualToContentsOfFile]]
}}}</p>
<p>====isIdenticalTo====utf8StringIsIdenticalTo</p>
<p>{{{inheritance
##isIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isIdenticalTo##|#variableIsIdenticalTo]]
}}}</p>
<p>====isNotEmpty====utf8StringIsNotEmpty</p>
<p>{{{inheritance
##isNotEmpty## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::isNotEmpty##|#stringIsNotEmpty]]
}}}</p>
<p>====isNotEqualTo====utf8StringIsNotEqualTo</p>
<p>{{{inheritance
##isNotEqualTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotEqualTo##|#variableIsNotEqualTo]]
}}}</p>
<p>====isNotIdenticalTo====utf8StringIsNotIdenticalTo</p>
<p>{{{inheritance
##isNotIdenticalTo## est une méthode héritée de l’asserter ##variable##.
Pour plus d’informations, reportez-vous à la documentation de [[##variable::isNotIdenticalTo##|#variableIsNotIdenticalTo]]
}}}</p>
<p>====match====utf8StringMatch</p>
<p>{{{inheritance
##match## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::match##|#stringMatch]]
}}}</p>
<p>{{{info
Pensez à bien ajouter ##u## comme option de recherche dans votre expression régulière. Reportez-vous au [[manuel de PHP|http://php.net/reference.pcre.pattern.modifiers]] pour avoir plus d’informations sur le sujet.
}}}</p>
<p>[[[php
$vdm = &#8220;Aujourd&#8217;hui, à 57 ans, mon père s&#8217;est fait tatouer une licorne sur l&#8217;épaule. VDM&#8221;;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;utf8String($vdm)</dt>
<dd>-&gt;match(&#8220;#^Aujourd&#8217;hui.*VDM$#u&#8221;)</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id79">
<h1>;<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h1>
<p>====notContains====utf8StringNotContains</p>
<p>{{{inheritance
##notContains## est une méthode héritée de l’asserter ##string##.
Pour plus d’informations, reportez-vous à la documentation de [[##string::notContains##|#stringNotContains]]
}}}</p>
<p>===afterDestructionOf</p>
<p>C’est l’assertion dédiée à la destruction des objets.</p>
<p>Cette assertion ne fait que prendre un objet, vérifier que la méthode ##__destruct()## est bien définie puis l’appelle.</p>
<p>Si ##__destruct()## existe bien et si son appel se passe sans erreur ni exception, alors le test passe.</p>
<p>[[[php
$this</p>
<blockquote>
<div>-&gt;afterDestructionOf($objectWithDestructor)     // passe
-&gt;afterDestructionOf($objectWithoutDestructor)  // échoue</div></blockquote>
</div>
<div class="section" id="id80">
<h1>;<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h1>
<p>===error</p>
<p>C’est l’assertion dédiée aux erreurs.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;when(</dt>
<dd><dl class="first docutils">
<dt>function() {</dt>
<dd>trigger_error(&#8216;message&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;error()</dt>
<dd>-&gt;exists() // ou notExists</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id81">
<h1>;<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h1>
<p>{{{info
La syntaxe utilise les fonctions anonymes (aussi appelées fermetures ou closures) introduites en PHP 5.3. Reportez-vous au [[manuel de PHP|http://php.net/functions.anonymous]] pour avoir plus d’informations sur le sujet.
}}}</p>
<p>{{{warning
Les types d’erreur E_ERROR, E_PARSE, E_CORE_ERROR, E_CORE_WARNING, E_COMPILE_ERROR, E_COMPILE_WARNING ainsi que la plupart des E_STRICT ne peuvent pas être gérés avec cette fonction.
}}}</p>
<p>====exists</p>
<p>##exists## vérifie qu’une erreur a été levée lors de l’exécution du code précédent.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;when(</dt>
<dd><dl class="first docutils">
<dt>function() {</dt>
<dd>trigger_error(&#8216;message&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;error()</dt>
<dd>-&gt;exists()      // passe</dd>
</dl>
</dd>
<dt>-&gt;when(</dt>
<dd><dl class="first docutils">
<dt>function() {</dt>
<dd>// code sans erreur</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;error()</dt>
<dd>-&gt;exists()      // échoue</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id82">
<h1>;<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h1>
<p>====notExists</p>
<p>##notExists## vérifie qu’aucune erreur n’a été levée lors de l’exécution du code précédent.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;when(</dt>
<dd><dl class="first docutils">
<dt>function() {</dt>
<dd>trigger_error(&#8216;message&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;error()</dt>
<dd>-&gt;notExists()   // échoue</dd>
</dl>
</dd>
<dt>-&gt;when(</dt>
<dd><dl class="first docutils">
<dt>function() {</dt>
<dd>// code sans erreur</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;error()</dt>
<dd>-&gt;notExists()   // passe</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id83">
<h1>;<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h1>
<p>====withType</p>
<p>##withType## vérifie le type de l’erreur levée.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;when(</dt>
<dd><dl class="first docutils">
<dt>function() {</dt>
<dd>trigger_error(&#8216;message&#8217;);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="docutils">
<dt>)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;error()</dt>
<dd>-&gt;withType(E_USER_NOTICE)   // passe
-&gt;withType(E_USER_WARNING)  // échoue</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id84">
<h1>;<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h1>
<p>===class</p>
<p>C’est l’assertion dédiée aux classes.</p>
<p>[[[php
$object = new StdClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;class(get_class($object))</p>
<p class="last">-&gt;class(&#8216;StdClass&#8217;)</p>
</dd>
</dl>
</div>
<div class="section" id="id85">
<h1>;<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h1>
<p>{{{info
Le mot-clef ##class## étant réservé en PHP, il n’a pas été possible de créer une assertion ##class##. Elle s’appelle donc ##phpClass## et un alias ##class## a été créé. Vous pourrez donc rencontrer des ##-&gt;phpClass()## ou des ##-&gt;class()##.
}}}</p>
<p>Il est conseillé d’utiliser exclusivement ##-&gt;class()##.</p>
<p>====hasInterface</p>
<p>##hasInterface## vérifie que la classe implémente une interface donnée.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;class(&#8216;ArrayIterator&#8217;)</dt>
<dd>-&gt;hasInterface(&#8216;Countable&#8217;)     // passe</dd>
<dt>-&gt;class(&#8216;StdClass&#8217;)</dt>
<dd>-&gt;hasInterface(&#8216;Countable&#8217;)     // échoue</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id86">
<h1>;<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h1>
<p>====hasMethod</p>
<p>##hasMethod## vérifie que la classe contient une méthode donnée.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;class(&#8216;ArrayIterator&#8217;)</dt>
<dd>-&gt;hasMethod(&#8216;count&#8217;)    // passe</dd>
<dt>-&gt;class(&#8216;StdClass&#8217;)</dt>
<dd>-&gt;hasMethod(&#8216;count&#8217;)    // échoue</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id87">
<h1>;<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h1>
<p>====hasNoParent</p>
<p>##hasNoParent## vérifie que la classe n’hérite d’aucune classe.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;class(&#8216;StdClass&#8217;)</dt>
<dd>-&gt;hasNoParent()     // passe</dd>
<dt>-&gt;class(&#8216;FilesystemIterator&#8217;)</dt>
<dd>-&gt;hasNoParent()     // échoue</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id88">
<h1>;<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h1>
<p>{{{warning
Une classe peut implémenter une ou plusieurs interfaces et n’hériter d’aucune classe. ##hasNoParent## ne vérifie pas les interfaces, uniquement les classes héritées.
}}}</p>
<p>====hasParent</p>
<p>##hasParent## vérifie que la classe hérite bien d’une classe.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;class(&#8216;StdClass&#8217;)</dt>
<dd>-&gt;hasParent()       // échoue</dd>
<dt>-&gt;class(&#8216;FilesystemIterator&#8217;)</dt>
<dd>-&gt;hasParent()       // passe</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id89">
<h1>;<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h1>
<p>{{{warning
Une classe peut implémenter une ou plusieurs interfaces et n’hériter d’aucune classe. ##hasParent## ne vérifie pas les interfaces, uniquement les classes héritées.
}}}</p>
<p>====isAbstract</p>
<p>##isAbstract## vérifie que la classe est abstraite.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;class(&#8216;StdClass&#8217;)</dt>
<dd>-&gt;isAbstract()       // échoue</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id90">
<h1>;<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h1>
<p>====isSubclassOf</p>
<p>##isSubclassOf## vérifie que la classe hérite de la classe donnée.</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;class(&#8216;FilesystemIterator&#8217;)</dt>
<dd>-&gt;isSubclassOf(&#8216;DirectoryIterator&#8217;)    // passe
-&gt;isSubclassOf(&#8216;SplFileInfo&#8217;)          // passe
-&gt;isSubclassOf(&#8216;StdClass&#8217;)             // échoue</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id91">
<h1>;<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h1>
<p>===mock</p>
<p>C’est l’assertion dédiée aux bouchons.</p>
<p>[[[php
$mock = new mockMyClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd>-&gt;mock($mock)</dd>
</dl>
</div>
<div class="section" id="id92">
<h1>;<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h1>
<p>{{{info
Reportez-vous à la documentation sur les [[bouchons|#Les-bouchons-mock]] pour obtenir plus d’informations sur la façon de créer et gérer les bouchons.
}}}</p>
<p>====call</p>
<p>##call## permet de spécifier une méthode du mock à tester</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;myMethod&#8217;)</dt>
<dd>-&gt;once()</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id93">
<h1>;<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h1>
<p>=====atLeastOnce</p>
<p>##atLeastOnce## vérifie que la méthode testée (voir ##[[call|#call]]##) du mock testé a été appelée au moins une fois.</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;myMethod&#8217;)</dt>
<dd>-&gt;atLeastOnce()</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id94">
<h1>;<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h1>
<p>=====exactly</p>
<p>##exactly## vérifie que la méthode testée (voir ##[[call|#call]]##) du mock testé exactement un certain nombre de fois.</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;myMethod&#8217;)</dt>
<dd>-&gt;exactly(2)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id95">
<h1>;<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h1>
<p>=====never</p>
<p>##never## vérifie que la méthode testée (voir ##[[call|#call]]##) du mock testé n’a jamais été appelée.</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;myMethod&#8217;)</dt>
<dd>-&gt;never()</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id96">
<h1>;<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##never## est équivalent à ##[[exactly|#exactly]](0)##.
}}}</p>
<p>=====once/twice/thrice</p>
<p>Ces assertions vérifient que la méthode testée (voir ##[[call|#call]]##) du mock testé a été appelée exactement&nbsp;:
* une fois (once)
* deux fois (twice)
* trois fois (thrice)</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;myMethod&#8217;)</dt>
<dd>-&gt;once()</dd>
<dt>-&gt;call(&#8216;mySecondMethod&#8217;)</dt>
<dd>-&gt;twice()</dd>
<dt>-&gt;call(&#8216;myThirdMethod&#8217;)</dt>
<dd>-&gt;thrice()</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id97">
<h1>;<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##once##, ##twice## et ##thrice## sont respectivement équivalents à un appel à ##[[exactly|#exactly]](1)##, ##[[exactly|#exactly]](2)## et ##[[exactly|#exactly]](3)##.
}}}</p>
<p>=====withAnyArguments</p>
<p>##withAnyArguments## permet de ne pas spécifier les arguments attendus lors de l’appel à la méthode testée (voir ##[[call|#call]]##) du mock testé.</p>
<p>Cette méthode est surtout utile pour remettre à zéro les arguments, comme dans l’exemple suivant&nbsp;:</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;myMethod&#8217;)</dt>
<dd>-&gt;withArguments(&#8216;first&#8217;)     -&gt;once()
-&gt;withArguments(&#8216;second&#8217;)    -&gt;once()
-&gt;withAnyArguments()-&gt;exactly(2)</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id98">
<h1>;<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h1>
<p>=====withArguments</p>
<p>##withArguments## permet de spécifier les paramètres attendus lors de l’appel à la méthode testée (voir ##[[call|#call]]##) du mock testé.</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;myMethod&#8217;)</dt>
<dd>-&gt;withArguments(&#8216;first&#8217;, &#8216;second&#8217;)-&gt;once()</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id99">
<h1>;<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h1>
<p>{{{warning
##withArguments## ne teste pas le type des arguments. Si vous souhaitez vérifier également leurs types, utilisez ##[[withIdenticalArguments|#withIdenticalArguments]]##.
}}}</p>
<p>=====withIdenticalArguments</p>
<p>##withIdenticalArguments## permet de spécifier les paramètres attendus lors de l’appel à la méthode testée (voir ##[[call|#call]]##) du mock testé.</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;myMethod&#8217;)</dt>
<dd>-&gt;withIdenticalArguments(&#8216;first&#8217;, &#8216;second&#8217;)-&gt;once()</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id100">
<h1>;<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h1>
<p>{{{warning
##withIdenticalArguments## teste le type des arguments. Si vous ne souhaitez pas vérifier leurs types, utilisez ##[[withArguments|#withArguments]]##.
}}}</p>
<p>====wasCalled</p>
<p>##wasCalled## vérifie qu’au moins une méthode du mock a été appelée au moins une fois.</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd>-&gt;wasCalled()</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id101">
<h1>;<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h1>
<p>====wasNotCalled</p>
<p>##wasNotCalled## vérifie qu’aucune méthode du mock n’a été appelée.</p>
<p>[[[php
$mock = new mockMyFirstClass;</p>
<dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;object(new MySecondClass($mock))</p>
<dl class="last docutils">
<dt>-&gt;mock($mock)</dt>
<dd>-&gt;wasNotCalled()</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id102">
<h1>;<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h1>
<p>===stream</p>
<p>C’est l’assertion dédiée aux stream.</p>
<p>{{{todo
Malheureusement, je n’ai aucune espèce d’idée de son fonctionnement, alors n’hésitez pas à compléter cette partie !
}}}</p>
<p>====isRead</p>
<p>{{{todo
We need help to write this section !
}}}</p>
<p>====isWrite</p>
<p>{{{todo
We need help to write this section !
}}}</p>
<p>==Aide à l’écriture</p>
<p>Il est possible d’écrire des tests unitaires avec atoum de plusieurs manières, et l’une d’elle est d’utiliser des mots-clefs tels que ##if##, ##and## ou bien encore ##then##, ##when## ou ##assert##.</p>
<p>===if, and, then</p>
<p>L’utilisation de ces mots-clefs est très intuitive&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;if($computer = new computer()))
-&gt;and($computer-&gt;setFirstOperand(2))
-&gt;and($computer-&gt;setSecondOperand(2))
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;object($computer-&gt;add())</dt>
<dd>-&gt;isIdenticalTo($computer)</dd>
<dt>-&gt;integer($computer-&gt;getResult())</dt>
<dd>-&gt;isEqualTo(4)</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id103">
<h1>;<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h1>
<p>Il est important de noter ces mots-clefs n’apporte rien techniquement ou fonctionnellement parlant, car ils n’ont pas d’autre but que de faciliter la compréhension du test et donc sa maintenance en y ajoutant de la sémantique compréhensible facilement par l’Humain et plus particulièrement un développeur.</p>
<p>Ainsi, ##if## et ##and## permettent de définir les conditions préalables pour que les assertions qui suivent le mot-clef ##then## passent avec succès.</p>
<p>Cependant, il n’y a pas de grammaire régissant l’ordre d’utilisation de ces mots-clefs et aucune vérification syntaxique n’est effectuée par atoum.</p>
<p>En conséquence, il est de la responsabilité du développeur de les utiliser de façon à ce que le test soit signifiant, même s’il est par exemple tout à fait possible d’écrire le test de la manière suivante&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;and($computer = new computer()))
-&gt;and($computer-&gt;setFirstOperand(2))
-&gt;then
-&gt;if($computer-&gt;setSecondOperand(2))</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;object($computer-&gt;add())</dt>
<dd>-&gt;isIdenticalTo($computer)</dd>
<dt>-&gt;integer($computer-&gt;getResult())</dt>
<dd>-&gt;isEqualTo(4)</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id104">
<h1>;<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h1>
<p>Pour les mêmes raisons, l’utilisation de ##then## est facultative.</p>
<p>Il est également important de noter qu’il est tout à fait possible d’écrire le même test en n’utilisant aucun mot-clef&nbsp;:</p>
<p>[[[php
$computer = new computer();
$computer-&gt;setFirstOperand(2);
$computer-&gt;setSecondOperand(2);</p>
<dl class="docutils">
<dt>$this</dt>
<dd><dl class="first last docutils">
<dt>-&gt;object($computer-&gt;add())</dt>
<dd>-&gt;isIdenticalTo($computer)</dd>
<dt>-&gt;integer($computer-&gt;getResult())</dt>
<dd>-&gt;isEqualTo(4)</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id105">
<h1>;<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h1>
<p>Le test ne sera pas plus lent ou plus rapide à exécuter et il n’y a aucun avantage à utiliser une notation ou une autre, l’important étant d’en choisir une et de s’y tenir pour faciliter la maintenance des tests (la problématique est exactement la même que celle des conventions de codage).</p>
<p>===when</p>
<p>En plus de ##if##, ##and## et ##then##, il existe également d’autres mots-clefs.</p>
<p>L’un d’entre eux est ##when##. Il dispose d’une fonctionnalité spécifique introduite pour contourner le fait qu’il est illégal d’écrire en PHP le code suivant&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;if($object = new object($valueAtKey0 = uniqid()))
-&gt;and(unset($object[0]))
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;sizeOf($object)</dt>
<dd>-&gt;isZero()</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id106">
<h1>;<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h1>
<p>Le langage génère en effet dans ce cas l’erreur fatale&nbsp;: ##Parse error: syntax error, unexpected &#8216;unset&#8217; (T_UNSET), expecting&nbsp;»)&#8217;##</p>
<p>Il est en effet impossible d’utiliser ##unset()## comme argument d’une fonction.</p>
<p>Pour résoudre ce problème, le mot-clef ##when## est capable d’interpréter l’éventuelle fonction anonyme qui lui est passée en argument, ce qui permet d’écrire le test précédent de la manière suivante&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;if($object = new object($valueAtKey0 = uniqid()))
-&gt;when(</p>
<blockquote>
<div><dl class="docutils">
<dt>function() use ($object) {</dt>
<dd>unset($object[0]);</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>)
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;sizeOf($object)</dt>
<dd>-&gt;isZero()</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id107">
<h1>;<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h1>
<p>Bien évidemment, si ##when## ne reçoit pas de fonction anonyme en argument, il se comporte exactement comme if, and et then, à savoir qu’il ne fait absolument rien fonctionnellement parlant.</p>
<p>===assert</p>
<p>Enfin, il existe le mot-clef ##assert## qui a également un fonctionnement un peu particulier.</p>
<p>Pour illustrer son fonctionnement, le test suivant va être utilisé&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;if($foo = new mockfoo())
-&gt;and($bar = new bar($foo))
-&gt;and($bar-&gt;doSomething())
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;mock($foo)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;doOtherThing&#8217;)</dt>
<dd>-&gt;once()</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>-&gt;if($bar-&gt;setValue(uniqid())
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;mock($foo)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;doOtherThing&#8217;)</dt>
<dd>-&gt;exactly(2)</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id108">
<h1>;<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h1>
<p>Le test précédent présente un inconvénient en terme de maintenance, car si le développeur a besoin d’intercaler un ou plusieurs nouveaux appels à bar::doOtherThing() entre les deux appels déjà effectués, il sera obligé de mettre à jour en conséquence la valeur de l’argument passé à exactly().</p>
<p>Pour remédier à ce problème, vous pouvez remettre à zéro un mock de 2 manières différentes&nbsp;:
* soit en utilisant $mock-&gt;getMockController()-&gt;resetCalls() ;
* soit en utilisant $this-&gt;resetMock($mock).</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;if($foo = new mockfoo())
-&gt;and($bar = new bar($foo))
-&gt;and($bar-&gt;doSomething())
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;mock($foo)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;doOtherThing&#8217;)</dt>
<dd>-&gt;once()</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>// 1ère manière
-&gt;if($foo-&gt;getMockController()-&gt;resetCalls())
-&gt;and($bar-&gt;setValue(uniqid())
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;mock($foo)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;doOtherThing&#8217;)</dt>
<dd>-&gt;once()</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>// 2ème manière
-&gt;if($this-&gt;resetMock($foo))
-&gt;and($bar-&gt;setValue(uniqid())
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;mock($foo)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;doOtherThing&#8217;)</dt>
<dd>-&gt;once()</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id109">
<h1>;<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h1>
<p>Ces méthodes effacent la mémoire du contrôleur, il est donc possible d’écrire l’assertion suivante comme si le bouchon n’avait jamais été utilisé.</p>
<p>Le mot-clef ##assert## permet de se passer de l’appel explicite à ##resetCalls()## et de plus il provoque l’effacement de la mémoire de l’ensemble des adaptateurs et des contrôleurs de bouchon définis au moment de son utilisation.</p>
<p>Grâce à lui, il est donc possible d’écrire le test précédent d’une façon plus simple et plus lisible, d’autant qu’il est possible de passer une chaîne de caractère à assert afin d’expliquer le rôle des assertions suivantes&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;assert(&#8216;Foo est vide&#8217;)</dt>
<dd><p class="first">-&gt;if($foo = new mockfoo())
-&gt;and($bar = new bar($foo))
-&gt;and($bar-&gt;doSomething())
-&gt;then</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>-&gt;mock($foo)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;doOtherThing&#8217;)</dt>
<dd>-&gt;once()</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>-&gt;assert(&#8216;Foo a une valeur&#8217;)</dt>
<dd><p class="first">-&gt;if($bar-&gt;setValue(uniqid())
-&gt;then</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>-&gt;mock($foo)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;call(&#8216;doOtherThing&#8217;)</dt>
<dd>-&gt;once()</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id110">
<h1>;<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h1>
<p>La chaîne de caractères sera de plus reprise dans les messages générés par atoum si l’une des assertions ne passe pas avec succès.</p>
<p>==Le mode loop</p>
<p>Lorsqu’un développeur fait du développement piloté par les tests, il travaille de la manière suivante&nbsp;:</p>
<p># il commence par créer le test correspondant à ce qu’il veut développer ;
# il exécute le test qu’il vient de créer ;
# il écrit le code permettant au test de passer avec succès ;
# il modifie ou complète son test et repars à l’étape 2.</p>
<p>Concrètement, cela signifie qu’il doit&nbsp;:
* créer son code dans son éditeur favori ;
* quitter son éditeur pour utiliser une console afin d’exécuter son test ;
* revenir à son éditeur pour écrire le code permettant au test de passer avec succès ;
* revenir à la console afin de relancer l’exécution de son test ;
* revenir à son éditeur afin de modifier ou compléter son test ;</p>
<p>Il y a donc bien un cycle qui se répétera tant que la fonctionnalité n’aura pas été développée dans son intégralité.</p>
<p>Cependant, ce cycle est complexe et impose de nombreux allers-retours entre plusieurs logiciels, ainsi que la saisie récurrente d’une même commande dans le terminal afin de lancer l’exécution des tests unitaires.</p>
<p>atoum propose le mode ##loop## disponible via les arguments ##-l## ou ##&#8211;loop##, qui permet au développeur de ne pas avoir à relancer manuellement les tests et permet donc de fluidifier le processus de développement.</p>
<p>Dans ce mode, atoum commence par exécuter une première fois les tests qui lui sont demandés.</p>
<p>Une fois les tests terminés, si les tests ont été passés avec succès par le code, atoum se met simplement en attente&nbsp;:</p>
<p>[[[shell
$ php tests/units/classes/adapter.php -l
&gt; atoum version DEVELOPMENT by Frédéric Hardy (/Users/fch/Atoum)
&gt; PHP path: /usr/local/bin/php
&gt; PHP version:
=&gt; PHP 5.3.8 (cli) (built: Sep 21 2011 23:14:37)
=&gt; Copyright (c) 1997-2011 The PHP Group
=&gt; Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies
=&gt;     with Xdebug v2.1.1, Copyright (c) 2002-2011, by Derick Rethans
&gt; mageekguyatoumtestsunitsadapter...
[S___________________________________________________________][1/1]
=&gt; Test duration: 0.02 second.
=&gt; Memory usage: 0.25 Mb.
&gt; Total test duration: 0.02 second.
&gt; Total test memory usage: 0.25 Mb.
&gt; Code coverage value: 100.00%
&gt; Running duration: 0.16 second.
Success (1 test, 0 method, 2 assertions, 0 error, 0 exception) !
Press &lt;Enter&gt; to reexecute, press any other key to stop...
]]]</p>
<p>Si le développeur presse une autre touche que ##Enter##, atoum se terminera.</p>
<p>Dans le cas contraire, atoum réexécutera à nouveau les mêmes tests, sans aucune autre action de la part du développeur.</p>
<p>Dans le cas où le code ne passe pas les tests avec succès, c’est-à-dire si des assertions ne sont pas vérifiées ou s’il y a eu des erreurs ou des exceptions, atoum se met également en attente&nbsp;:</p>
<p>[[[shell
$ php tests/units/classes/adapter.php -l
&gt; atoum version DEVELOPMENT by Frédéric Hardy (/Users/fch/Atoum)
&gt; PHP path: /usr/local/bin/php
&gt; PHP version:
=&gt; PHP 5.3.8 (cli) (built: Sep 21 2011 23:14:37)
=&gt; Copyright (c) 1997-2011 The PHP Group
=&gt; Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies
=&gt;     with Xdebug v2.1.1, Copyright (c) 2002-2011, by Derick Rethans
&gt; mageekguyatoumtestsunitsadapter...
[F___________________________________________________________][1/1]
=&gt; Test duration: 0.00 second.
=&gt; Memory usage: 0.00 Mb.
&gt; Total test duration: 0.00 second.
&gt; Total test memory usage: 0.00 Mb.
&gt; Running duration: 0.17 second.
Failure (1 test, 0 method, 1 failure, 0 error, 0 exception) !
&gt; There is 1 failure:
=&gt; mageekguyatoumtestsunitsadapter::test__call():
In file /Users/fch/Atoum/tests/units/classes/adapter.php on line 17, mageekguyatoumassertersstring::isEqualTo() failed: strings are not equals
-Reference
+Data
&#64;&#64; -1 +1 &#64;&#64;
-string(13) &#8220;4ea0354cd717c&#8221;
+string(32) &#8220;19798c230d5462b3bdae194f364feffa&#8221;
Press &lt;Enter&gt; to reexecute, press any other key to stop...
]]]</p>
<p>Tout comme dans le cas ou tout s’est bien passé, si le développeur presse une autre touche que ##Enter##, atoum se terminera.</p>
<p>Cependant, s’il presse la touche ##Enter##, au lieu de rejouer les mêmes tests comme dans le cas où les tests ont été passés avec succès, atoum n’exécutera que les tests en échec, au lieu de les rejouer dans leur intégralité.</p>
<p>Le développeur pourra alors dépiler les problèmes et rejouer les tests en erreur autant de fois que nécessaire simplement en appuyant sur ##Enter##.</p>
<p>De plus, une fois que tous les tests en échec passeront à nouveau avec succès, atoum exécutera automatiquement la totalité de la suite de tests afin de détecter les éventuelles régressions introduites par la ou les corrections effectuées par le développeur.</p>
<p>Bien évidemment, le mode ##loop## ne prend en compte que [[le ou les fichiers de tests unitaires lancés|chapitre3.html#Fichiers-a-executer]] par atoum.</p>
<p>==Le mode debug</p>
<p>Parfois, un test ne passe pas et il est difficile d’en découvrir la raison.</p>
<p>Dans ce cas, l’une des techniques possibles pour remédier au problème est de tracer le comportement du code concerné, soit directement au cœur de la classe testée à l’aide de fonctions du type de ##var_dump()## ou ##print_r()##, soit au niveau du test unitaire.</p>
<p>Et il se trouve que atoum dispose d’un certain nombre d’outils pour faciliter la tâche du développeur dans ce dernier contexte.</p>
<p>Ces outils ne sont cependant actif que lorsque atoum est exécuté à l’aide de l’argument ##&#8211;debug##, afin que l’exécution des tests unitaires ne soit pas perturbée par les instructions relatives au débogage hors de ce contexte.</p>
<p>Lorsque l’argument ##&#8211;debug## est utilisé, trois méthodes peuvent être activée&nbsp;:
* ##dump()## qui permet de connaître le contenu d’une variable ;
* ##stop()## qui permet d’arrêter l’exécution d’un test ;
* ##executeOnFailure()## qui permet de définir une fonction anonyme qui ne sera exécutée qu’en cas d’échec d’une assertion.</p>
<p>Ces trois méthodes s’intègrent parfaitement dans l’interface fluide qui caractérise atoum.</p>
<p>===dump</p>
<p>La méthode ##dump()## peut s’utiliser de la manière suivante&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;if($foo = new foo())
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;object($foo-&gt;setBar($bar = new bar()))</dt>
<dd>-&gt;isIdenticalTo($foo)</dd>
</dl>
<p>-&gt;dump($foo-&gt;getBar())</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id111">
<h1>;<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h1>
<p>Lors de l’exécution du test, le retour de la méthode ##foo::getBar()## sera affiché sur la sortie standard.</p>
<p>Il est également possible de passer plusieurs arguments à ##dump()##, de la manière suivante&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;if($foo = new foo())
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;object($foo-&gt;setBar($bar = new bar()))</dt>
<dd>-&gt;isIdenticalTo($foo)</dd>
</dl>
<p>-&gt;dump($foo-&gt;getBar(), $bar)</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id112">
<h1>;<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h1>
<p>===stop</p>
<p>L’utilisation de la méthode ##stop()## est également très simple&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;if($foo = new foo())
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;object($foo-&gt;setBar($bar = new bar()))</dt>
<dd>-&gt;isIdenticalTo($foo)</dd>
</dl>
<p>-&gt;stop() // le test s&#8217;arrêtera ici si &#8211;debug est utilisé
-&gt;object($foo-&gt;getBar())</p>
<blockquote>
<div>-&gt;isIdenticalTo($bar)</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id113">
<h1>;<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h1>
<p>===executeOnFailure</p>
<p>La méthode ##executeOnFailure()## est très puissante et tout aussi simple à utiliser.</p>
<p>Elle prend en effet en argument une fonction anonyme qui sera exécutée si et seulement si l’une des assertions composant le test n’est pas vérifiée. Elle s’utilise de la manière suivante&nbsp;:</p>
<p>[[[php
$this</p>
<blockquote>
<div><p>-&gt;if($foo = new foo())
-&gt;executeOnFailure(</p>
<blockquote>
<div><dl class="docutils">
<dt>function() use ($foo) {</dt>
<dd>var_dump($foo);</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>)
-&gt;then</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;object($foo-&gt;setBar($bar = new bar()))</dt>
<dd>-&gt;isIdenticalTo($foo)</dd>
<dt>-&gt;object($foo-&gt;getBar())</dt>
<dd>-&gt;isIdenticalTo($bar)</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id114">
<h1>;<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h1>
<p>Dans l’exemple précédent, contrairement à ##dump()## qui provoque systématiquement l’affichage sur la sortie standard le contenu des variables qui lui sont passées en argument, la fonction anonyme passée en argument ne provoquera l’affichage du contenu de la variable ##foo## que si l’une des assertions suivantes est en échec.</p>
<p>Bien évidemment, il est possible de faire appel plusieurs fois à ##executeOnFailure()## dans une même méthode de test pour définir plusieurs fonctions anonymes différentes devant être exécutées en cas d’échec du test.</p>
<p>==Les méthodes d’initialisation</p>
<p>Lorsqu’il exécute les méthodes de test d’une classe, atoum suit le processus suivant&nbsp;:
# il exécute la méthode ##setUp()## de la classe de test ;
# il lance un sous-processus PHP pour exécuter chaque méthode de test ;
# dans le sous-processus PHP, avant d’exécuter la méthode de test, il exécute la méthode ##beforeTestMethod()## de la classe de test ;
# dans le sous-processus PHP, il exécute la méthode de test ;
# dans le sous-processus PHP, il exécute la méthode ##afterTestMethod()## de la classe de test ;
# une fois le sous-processus PHP terminé, il exécute la méthode ##tearDown()## de la classe de test.</p>
<p>Les méthodes ##setUp()## et ##tearDown()## permettent donc respectivement d’initialiser et de nettoyer l’environnement de test pour l’ensemble des méthodes de test de la classe exécutée, à la différence des méthodes ##beforeTestMethod()## et ##afterTestMethod()##.</p>
<p>Ces deux méthodes permettent en effet respectivement d’initialiser et de nettoyer l’environnement d’exécution des tests individuellement pour chacune des méthodes de test de la classe, puisqu’elles sont exécutées dans le même sous-processus, au contraire de ##setUp()## et ##tearDown()##.</p>
<p>C’est d’ailleurs la raison pour laquelle les méthodes ##beforeTestMethod()## et ##afterTestMethod()## acceptent comme argument le nom de la méthode de test exécutée, afin de pouvoir ajuster les traitements en conséquence.</p>
<p>[[[php
&lt;?php
namespace vendorprojecttestsunits;</p>
<dl class="docutils">
<dt>use</dt>
<dd>mageekguyatoum,
vendorproject</dd>
</dl>
<p>;</p>
<p>require __DIR__ . &#8216;/mageekguy.atoum.phar&#8217;;</p>
<p>class bankAccount extends atoum
{</p>
<blockquote>
<div><p>public function setUp()
{</p>
<blockquote>
<div>// Exécutée <em>avant l&#8217;ensemble</em> des méthodes de test.
// Initialisation globale.</div></blockquote>
<p>}</p>
<p>public function beforeTestMethod($method)
{</p>
<blockquote>
<div><p>// Exécutée <em>avant chaque</em> méthode de test.</p>
<p>switch ($method)
{</p>
<blockquote>
<div><dl class="docutils">
<dt>case &#8216;testGetOwner&#8217;:</dt>
<dd>// Initialisation pour testGetOwner().</dd>
</dl>
<p>break;</p>
<dl class="docutils">
<dt>case &#8216;testGetOperations&#8217;:</dt>
<dd>// Initialisation pour testGetOperations().</dd>
</dl>
<p>break;</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
<p>public function testGetOwner()
{</p>
<blockquote>
<div>...</div></blockquote>
<p>}</p>
<p>public function testGetOperations()
{</p>
<blockquote>
<div>...</div></blockquote>
<p>}</p>
<p>public function afterTestMethod($method)
{</p>
<blockquote>
<div><p>// Exécutée <em>après chaque</em> méthode de test.</p>
<p>switch ($method)
{</p>
<blockquote>
<div><dl class="docutils">
<dt>case &#8216;testGetOwner&#8217;:</dt>
<dd>// Nettoyage pour testGetOwner().</dd>
</dl>
<p>break;</p>
<dl class="docutils">
<dt>case &#8216;testGetOperations&#8217;:</dt>
<dd>// Nettoyage pour testGetOperations().</dd>
</dl>
<p>break;</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
<p>public function tearDown()
{</p>
<blockquote>
<div>// Exécutée après l&#8217;ensemble des méthodes de test.
// Nettoyage global.</div></blockquote>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id115">
<h1>}<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h1>
<p>Par défaut, les méthodes ##setUp()##, ##beforeTestMethod()##, ##afterTestMethod()## et ##tearDown()## ne font absolument rien.</p>
<p>Il est donc de la responsabilité du programmeur de les surcharger lorsque c’est nécessaire dans les classes de test concerné.</p>
<p>==Fournisseurs de données (data provider)</p>
<p>Pour vous aider à tester efficacement vos classes, atoum met à votre disposition des fournisseurs de données (data provider en anglais).</p>
<p>Un fournisseur de données est une méthode d’une classe de test chargée de générer des arguments pour une méthode de test, arguments qui seront utilisés par ladite méthode pour valider des assertions.</p>
<p>La définition du fournisseur de données qui doit être utilisé par une méthode de test se fait grâce à l’annotation ##&#64;dataProvider## appliquée à la méthode de test concernée, de la manière suivante&nbsp;:</p>
<p>[[[php
class calculator extends atoum
{</p>
<blockquote>
<div><dl class="docutils">
<dt>/**</dt>
<dd><ul class="first simple">
<li>&#64;dataProvider sumDataProvider</li>
</ul>
<p class="last"><a href="#id116"><span class="problematic" id="id117">*</span></a>/</p>
</dd>
</dl>
<p>// Veillez à définir le bon nombre d&#8217;arguments
public function testSum($a, $b)
{</p>
<blockquote>
<div><dl class="docutils">
<dt>$this</dt>
<dd><p class="first">-&gt;if($calculator = new projectcalculator())
-&gt;then</p>
<blockquote class="last">
<div>-&gt;integer($calculator-&gt;sum($a, $b))-&gt;isEqualTo($a + $b)</div></blockquote>
</dd>
</dl>
<p>;</p>
</div></blockquote>
<p>}</p>
<p>...</p>
</div></blockquote>
</div>
<div class="section" id="id118">
<h1>}<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h1>
<p>Évidemment, il ne faut pas oublier de définir, au niveau de la méthode de test, les arguments correspondant à ceux qui seront retournés par le fournisseur de données. Si ce n’est pas le cas, atoum générera une erreur lors de l’exécution des tests.</p>
<p>Une fois l’annotation définie, il n’y a plus qu’à créer la méthode correspondante&nbsp;:</p>
<p>[[[php
class calculator extends atoum
{</p>
<blockquote>
<div><p>...</p>
<p>// Fournisseur de données de testSum().
public function sumDataProvider()
{</p>
<blockquote>
<div><dl class="docutils">
<dt>return array(</dt>
<dd>array( 1, 1),
array( 1, 2),
array(-1, 1),
array(-1, 2),</dd>
</dl>
<p>);</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</div>
<div class="section" id="id119">
<h1>}<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h1>
<p>Lors de l’exécution des tests, atoum appellera la méthode de test ##testSum()## successivement avec les arguments ##(1, 1)##, ##(1, 2)##, ##(-1, 1)## et ##(-1, 2)## renvoyés par la méthode ##sumDataProvider()##.</p>
<p>{{{warning
L’isolation des tests ne sera pas utilisée dans ce contexte, ce qui veut dire que chacun des appels successifs à la méthode ##testSum()## sera réalisé dans le même processus PHP.
}}}</p>
<p>{{{info
Un fournisseur de données peut au choix retourner un tableau ou bien un itérateur.
}}}</p>
<p>==Les bouchons (mock)</p>
<p>atoum dispose d’un système de bouchonnage (mock en anglais) puissant et simple à mettre en œuvre qui vous permettra de générer des mocks à partir de classes (existantes ou inexistantes) ou d’interfaces, mais également à partir de classe abstraite. Grâce à ces bouchons, vous pourrez simuler des comportements en redéfinissant les méthodes publiques de vos classes.</p>
<p>===Générer un bouchon</p>
<p>Il y a plusieurs manières de créer un bouchon à partir d’une interface ou d’une classe (abstraite ou non).</p>
<p>La plus simple est de créer un objet dont le nom absolu est préfixé par ##mock##:</p>
<p>[[[php
// création d&#8217;un bouchon de l&#8217;interface Countable
$countableMock = new mockCountable;</p>
<p>// création d&#8217;un bouchon de la classe abstraite
// VendorProjectAbstractClass
$vendorAppMock = new mockVendorProjectAbstractClass;</p>
<p>// création d&#8217;un bouchon de la classe StdClass
$stdObject     = new mockStdClass;</p>
<p>// création d&#8217;un bouchon à partir d&#8217;une classe inexistante
$anonymousMock = new mockMyUnknownClass;
]]]</p>
<p>===Le générateur de bouchon</p>
<p>atoum s’appuie sur un composant spécialisé pour générer les bouchons&nbsp;: le ##mockGenerator##. Vous avez accès à ce dernier dans vos tests afin de modifier la procédure de génération des mocks.</p>
<p>Par défaut, les bouchons seront générés dans le namespace ##mock## et se comporteront exactement de la même manière que les instances de la classe originale (le bouchon hérite directement de la classe originale).</p>
<p>====Changer le nom de la classe</p>
<p>Si vous désirez changer le nom de la classe ou son espace de nom, vous devez utiliser le ##mockGenerator##.</p>
<p>Sa méthode ##generate## prend 3 paramètres&nbsp;:
* le nom de l’interface ou de la classe à bouchonner ;
* le nouvel espace de nom, optionnel ;
* le nouveau nom de la classe, optionnel.</p>
<p>[[[php
// création d&#8217;un bouchon de l&#8217;interface Countable vers MyMockCountable
// on ne change que l&#8217;espace de nom
$this-&gt;mockGenerator-&gt;generate(&#8216;Countable&#8217;, &#8216;MyMock&#8217;);
$countableMock = new myMockCountable;</p>
<p>// création d&#8217;un bouchon de la classe abstraite
// VendorProjectAbstractClass vers MyMockAClass
// on change l&#8217;espace de nom et le nom de la classe
$this-&gt;mockGenerator-&gt;generate(&#8216;VendorProjectAbstractClass&#8217;, &#8216;MyMock&#8217;, &#8216;AClass&#8217;);
$vendorAppMock = new myMockAClass;</p>
<p>// création d&#8217;un bouchon de la classe StdClass vers mockOneClass
// on ne change que le nom de la classe
$this-&gt;mockGenerator-&gt;generate(&#8216;StdClass&#8217;, null, &#8216;OneClass&#8217;);
$stdObject     = new mockOneClass;
]]]</p>
<p>{{{info
Si vous n’utilisez que le premier argument et ne changez ni l’espace de nommage ni le nom de la classe, alors la première solution est équivalente.
}}}</p>
<p>[[[php
$countableMock = new mockCountable;</p>
<p>// est équivalent à:</p>
<p>$this-&gt;mockGenerator-&gt;generate(&#8216;Countable&#8217;);   // inutile
$countableMock = new mockCountable;
]]]</p>
<p>====Shunter les appels aux méthodes parentes</p>
<p>Un bouchon hérite directement de la classe à partir de laquelle il a été généré, ses méthodes se comportent donc exactement de la même manière.</p>
<p>Dans certains cas, il peut être utile de shunter les appels aux méthodes parents afin que leur code ne soit plus exécuté. Le ##mockGenerator## met à votre disposition plusieurs méthodes pour y parvenir&nbsp;:</p>
<p>[[[php
$this-&gt;mockGenerator-&gt;shuntParentClassCalls();
// le bouchon ne fera pas appel à la classe parente
$countableMock = new mockOneClass;
$this-&gt;mockGenerator-&gt;unshuntParentClassCalls();
]]]</p>
<p>Ici, toutes les méthodes du bouchon se comporteront comme si elles n’avaient pas d’implémentation par contre elles conserveront la signature des méthodes originales. Vous pouvez également préciser les méthodes que vous souhaitez shunter&nbsp;:</p>
<p>[[[php
$this-&gt;mockGenerator-&gt;shunt(&#8216;firstMethod&#8217;);
$this-&gt;mockGenerator-&gt;shunt(&#8216;secondMethod&#8217;);
// le bouchon ne fera pas appel à la classe parente pour les méthodes firstMethod et secondMethod
$countableMock = new mockOneClass;
]]]</p>
<p>====Rendre une méthode orpheline</p>
<p>Il peut parfois être intéressant de rendre une méthode orpheline, c’est-à-dire, lui donner une signature et une implémentation vide. Cela peut être particulièrement utile pour générer des bouchons sans avoir à instancier toutes leurs dépendances.</p>
<p>[[[php
class FirstClass {</p>
<blockquote>
<div><p>protected $dep;</p>
<dl class="docutils">
<dt>public function __construct(SecondClass $dep) {</dt>
<dd>$this-&gt;dep = $dep;</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>}</p>
<dl class="docutils">
<dt>class SecondClass {</dt>
<dd><p class="first">protected $deps;</p>
<dl class="docutils">
<dt>public function __construct(ThirdClass $a, FourthClass $b) {</dt>
<dd>$this-&gt;deps = array($a, $b);</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p>}</p>
<p>$this-&gt;mockGenerator-&gt;orphanize(&#8216;__construct&#8217;);
$this-&gt;mockGenerator-&gt;shuntParentClassCalls();</p>
<p>// Nous pouvons instancier le bouchon sans injecter ses dépendances
$mock = new mockSecondClass();</p>
<p>$object = new FirstClass($mock);
]]]</p>
<p>===Modifier le comportement d’un bouchon</p>
<p>Une fois le bouchon créé et instancié, il est souvent utile de pouvoir modifier le comportement de ses méthodes.</p>
<p>Pour cela, il faut passer par son contrôleur en utilisant l’une des méthodes suivantes&nbsp;:</p>
<p>[[[php
$databaseClient = new mockDatabaseClient();</p>
<p>$databaseClient-&gt;getMockController()-&gt;connect = function() {};
// Équivalent à
$this-&gt;calling($databaseClient)-&gt;connect = function() {};
]]]</p>
<p>Le ##mockController## vous permet de redéfinir <strong>uniquement les méthodes publiques et abstraites protégées</strong> et met à votre disposition plusieurs méthodes&nbsp;:</p>
<p>[[[php
$databaseClient = new mockDatabaseClient();</p>
<p>// redéfinie la méthode connect : elle retournera toujours true
$this-&gt;calling($databaseClient)-&gt;connect = true;</p>
<p>// redéfinie la méthode select
$this-&gt;calling($databaseClient)-&gt;select = function() {</p>
<blockquote>
<div>return array();</div></blockquote>
<p>};</p>
<p>// redéfinie la méthode query avec des arguments
$result = array();
$this-&gt;calling($databaseClient)-&gt;query = function(Query $query) use($result) {</p>
<blockquote>
<div><dl class="docutils">
<dt>switch($query-&gt;type) {</dt>
<dd><dl class="first last docutils">
<dt>case Query::SELECT:</dt>
<dd>return $result</dd>
<dt>default;</dt>
<dd>return null;</dd>
</dl>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>};</p>
<p>// la méthode connect lèvera une exception
$this-&gt;calling($databaseClient)-&gt;connect-&gt;throw = new DatabaseClientException();
]]]</p>
<p>Comme vous pouvez le voir, il est possible d’utiliser plusieurs méthodes afin d’obtenir le comportement souhaité&nbsp;:
* Utiliser une valeur statique qui sera retournée par la méthode
* Utilser une implémentation courte grâce aux fonctions anonymes de PHP
* Utiliser le mot-clef ##throw## pour lever une exception</p>
<p>Vous pouvez également spécifier plusieurs valeurs en fonction de l&#8217;ordre d&#8217;appel:</p>
<p>[[[php
// défaut
$this-&gt;calling($databaseClient)-&gt;count = rand(0, 10);
// équivalent à
$this-&gt;calling($databaseClient)-&gt;count[0] = rand(0, 10);</p>
<p>// 1er appel
$this-&gt;calling($databaseClient)-&gt;count[1] = 13;</p>
<p>// 3ème appel
$this-&gt;calling($databaseClient)-&gt;count[3] = 42;
]]]</p>
<ul class="simple">
<li>Le premier appel retournera 13.</li>
<li>Le second aura le comportement par défaut, c&#8217;est à dire un nombre aléatoire.</li>
<li>Le troisième appel retournera 42.</li>
<li>Tous les appels suivants auront le comportement par défaut, c&#8217;est à dire des nombres aléatoires.</li>
</ul>
<p>Si vous souhaitez que plusieurs méthodes du bouchon aient le même comportement, vous pouvez utiliser les méthodes [[##methods##|#methods]] ou [[##methodsWhichMatch##|#methodsWhichMatch]].</p>
<p>====methods</p>
<p>##methods## vous permet, grâce à la fonction anonyme passée en argument, de définir pour quelles méthodes le comportement doit être modifié&nbsp;:</p>
<p>[[[php
// si la méthode a tel ou tel nom,
// on redéfinit son comportement
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;calling($mock)</dt>
<dd><dl class="first docutils">
<dt>-&gt;methods(</dt>
<dd><dl class="first docutils">
<dt>function($method) {</dt>
<dd><dl class="first docutils">
<dt>return in_array(</dt>
<dd><p class="first">$method,
array(</p>
<blockquote>
<div>&#8216;getOneThing&#8217;,
&#8216;getAnOtherThing&#8217;</div></blockquote>
<p class="last">)</p>
</dd>
</dl>
<p class="last">);</p>
</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="last docutils">
<dt>)</dt>
<dd>-&gt;return = uniqid()</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>;</p>
<p>// on redéfinit le comportement de toutes les méthodes
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;calling($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;methods()</dt>
<dd>-&gt;return = null</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>;</p>
<p>// si la méthode commence par &#8220;get&#8221;,
// on redéfinit son comportement
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;calling($mock)</dt>
<dd><dl class="first docutils">
<dt>-&gt;methods(</dt>
<dd><dl class="first docutils">
<dt>function($method) {</dt>
<dd>return substr($method, 0, 3) == &#8216;get&#8217;;</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<dl class="last docutils">
<dt>)</dt>
<dd>-&gt;return = uniqid()</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>;</p>
<p>]]]</p>
<p>Dans le cas du dernier exemple, vous devriez plutôt utiliser [[##methodsWhichMatch##|#methodsWhichMatch]].</p>
<p>{{{info
La syntaxe utilise les fonctions anonymes (aussi appelées fermetures ou closures) introduites en PHP 5.3. Reportez-vous au [[manuel de PHP|http://php.net/functions.anonymous]] pour avoir plus d’informations sur le sujet.
}}}</p>
<p>====methodsWhichMatch</p>
<p>##methodsWhichMatch## vous permet de définir les méthodes où le comportement doit être modifié grâce à l’expression rationnelle passée en argument&nbsp;:</p>
<p>[[[php
// si la méthode commence par &#8220;is&#8221;,
// on redéfinit son comportement
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;calling($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;methodsWhichMatch(&#8216;/^is/&#8217;)</dt>
<dd>-&gt;return = true</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>;</p>
<p>// si la méthode commence par &#8220;get&#8221; (insensible à la casse),
// on redéfinit son comportement
$this</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;calling($mock)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;methodsWhichMatch(&#8216;/^get/i&#8217;)</dt>
<dd>-&gt;throw = new exception</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id120">
<h1>;<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h1>
<p>{{{info
##methodsWhichMatch## utilise [[##preg_match##|http://php.net/preg_match]] et les expressions rationnelles. Reportez-vous au [[manuel de PHP|http://php.net/pcre]] pour avoir plus d’informations sur le sujet.
}}}</p>
<p>===Cas particulier du constructeur</p>
<p>Pour bouchonner le constructeur d’une classe, il faut&nbsp;:
* créer une instance de la classe atoummockcontroller avant d’appeler le constructeur du bouchon ;
* définir via ce contrôleur le comportement du constructeur du bouchon à l’aide d’une fonction anonyme ;
* injecter le contrôleur lors de l’instanciation du bouchon.</p>
<p>[[[php
$controller = new atoummockcontroller();
$controller-&gt;__construct = function() {};</p>
<p>$databaseClient = new mockDatabaseClient($controller);
]]]</p>
<p>{{{info
Dans l’exemple ci-dessus, le constructeur de la classe ##DatabaseClient## n’a aucun argument, nous injectons directement le contrôleur. Dans le cas d’un constructeur ayant des paramètres, il faudra passer le contrôleur en dernier argument, après tous les arguments requis et optionnels.
}}}</p>
<p>===Tester un bouchon</p>
<p>atoum vous permet de vérifier qu’un bouchon a été utilisé correctement.</p>
<p>[[[php
$databaseClient = new mockDatabaseClient();
$databaseClient-&gt;getMockController()-&gt;connect = function() {};
$databaseClient-&gt;getMockController()-&gt;query   = array();</p>
<p>$bankAccount = new VendorProjectBankAccount();
$this</p>
<blockquote>
<div><p>// utilisation du bouchon via un autre objet
-&gt;array($bankAccount-&gt;getOperation($databaseClient))</p>
<blockquote>
<div>-&gt;isEmpty()</div></blockquote>
<p>// test du bouchon
-&gt;mock($databaseClient)</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt;call(&#8216;query&#8217;)</dt>
<dd><dl class="first last docutils">
<dt>-&gt;once()        // vérifie que la méthode query</dt>
<dd>// n&#8217;a été appelé qu&#8217;une seule fois</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id121">
<h1>;<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h1>
<p>{{{info
Reportez-vous à la documentation sur l’assertion ##[[mock|#mock]]## pour obtenir plus d’informations sur les tests des bouchons.
}}}</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">;</a></li>
<li><a class="reference internal" href="#id2">;</a></li>
<li><a class="reference internal" href="#id3">;</a></li>
<li><a class="reference internal" href="#id4">;</a></li>
<li><a class="reference internal" href="#id5">;</a></li>
<li><a class="reference internal" href="#id6">;</a></li>
<li><a class="reference internal" href="#id7">;</a></li>
<li><a class="reference internal" href="#id8">;</a></li>
<li><a class="reference internal" href="#id9">;</a></li>
<li><a class="reference internal" href="#id10">;</a></li>
<li><a class="reference internal" href="#id11">;</a></li>
<li><a class="reference internal" href="#id12">;</a></li>
<li><a class="reference internal" href="#id13">;</a></li>
<li><a class="reference internal" href="#id14">;</a></li>
<li><a class="reference internal" href="#id15">;</a></li>
<li><a class="reference internal" href="#id16">;</a></li>
<li><a class="reference internal" href="#id17">;</a></li>
<li><a class="reference internal" href="#id18">;</a></li>
<li><a class="reference internal" href="#id19">;</a></li>
<li><a class="reference internal" href="#id20">;</a></li>
<li><a class="reference internal" href="#id21">;</a></li>
<li><a class="reference internal" href="#id22">;</a></li>
<li><a class="reference internal" href="#id23">;</a></li>
<li><a class="reference internal" href="#id24">;</a></li>
<li><a class="reference internal" href="#id25">;</a></li>
<li><a class="reference internal" href="#id26">;</a></li>
<li><a class="reference internal" href="#id27">;</a></li>
<li><a class="reference internal" href="#id28">;</a></li>
<li><a class="reference internal" href="#id29">;</a></li>
<li><a class="reference internal" href="#id30">;</a></li>
<li><a class="reference internal" href="#id31">;</a></li>
<li><a class="reference internal" href="#id32">;</a></li>
<li><a class="reference internal" href="#id33">;</a></li>
<li><a class="reference internal" href="#id34">;</a></li>
<li><a class="reference internal" href="#id35">;</a></li>
<li><a class="reference internal" href="#id36">;</a></li>
<li><a class="reference internal" href="#id37">;</a></li>
<li><a class="reference internal" href="#id38">;</a></li>
<li><a class="reference internal" href="#id39">;</a></li>
<li><a class="reference internal" href="#id40">;</a></li>
<li><a class="reference internal" href="#id41">;</a></li>
<li><a class="reference internal" href="#id42">;</a></li>
<li><a class="reference internal" href="#id43">;</a></li>
<li><a class="reference internal" href="#id44">;</a></li>
<li><a class="reference internal" href="#id45">;</a></li>
<li><a class="reference internal" href="#id46">;</a></li>
<li><a class="reference internal" href="#id47">;</a></li>
<li><a class="reference internal" href="#id48">;</a></li>
<li><a class="reference internal" href="#id49">;</a></li>
<li><a class="reference internal" href="#id50">;</a></li>
<li><a class="reference internal" href="#id51">;</a></li>
<li><a class="reference internal" href="#id52">;</a></li>
<li><a class="reference internal" href="#id53">;</a></li>
<li><a class="reference internal" href="#id54">;</a></li>
<li><a class="reference internal" href="#id55">;</a></li>
<li><a class="reference internal" href="#id56">;</a></li>
<li><a class="reference internal" href="#id57">;</a></li>
<li><a class="reference internal" href="#id58">;</a></li>
<li><a class="reference internal" href="#id59">;</a></li>
<li><a class="reference internal" href="#id60">;</a></li>
<li><a class="reference internal" href="#id61">;</a></li>
<li><a class="reference internal" href="#id62">;</a></li>
<li><a class="reference internal" href="#id63">;</a></li>
<li><a class="reference internal" href="#id64">;</a></li>
<li><a class="reference internal" href="#id65">;</a></li>
<li><a class="reference internal" href="#id66">;</a></li>
<li><a class="reference internal" href="#id67">;</a></li>
<li><a class="reference internal" href="#id68">;</a></li>
<li><a class="reference internal" href="#id69">;</a></li>
<li><a class="reference internal" href="#id70">;</a></li>
<li><a class="reference internal" href="#id71">;</a></li>
<li><a class="reference internal" href="#id72">;</a></li>
<li><a class="reference internal" href="#id73">;</a></li>
<li><a class="reference internal" href="#id74">;</a></li>
<li><a class="reference internal" href="#id75">;</a></li>
<li><a class="reference internal" href="#id76">;</a></li>
<li><a class="reference internal" href="#id77">;</a></li>
<li><a class="reference internal" href="#id78">;</a></li>
<li><a class="reference internal" href="#id79">;</a></li>
<li><a class="reference internal" href="#id80">;</a></li>
<li><a class="reference internal" href="#id81">;</a></li>
<li><a class="reference internal" href="#id82">;</a></li>
<li><a class="reference internal" href="#id83">;</a></li>
<li><a class="reference internal" href="#id84">;</a></li>
<li><a class="reference internal" href="#id85">;</a></li>
<li><a class="reference internal" href="#id86">;</a></li>
<li><a class="reference internal" href="#id87">;</a></li>
<li><a class="reference internal" href="#id88">;</a></li>
<li><a class="reference internal" href="#id89">;</a></li>
<li><a class="reference internal" href="#id90">;</a></li>
<li><a class="reference internal" href="#id91">;</a></li>
<li><a class="reference internal" href="#id92">;</a></li>
<li><a class="reference internal" href="#id93">;</a></li>
<li><a class="reference internal" href="#id94">;</a></li>
<li><a class="reference internal" href="#id95">;</a></li>
<li><a class="reference internal" href="#id96">;</a></li>
<li><a class="reference internal" href="#id97">;</a></li>
<li><a class="reference internal" href="#id98">;</a></li>
<li><a class="reference internal" href="#id99">;</a></li>
<li><a class="reference internal" href="#id100">;</a></li>
<li><a class="reference internal" href="#id101">;</a></li>
<li><a class="reference internal" href="#id102">;</a></li>
<li><a class="reference internal" href="#id103">;</a></li>
<li><a class="reference internal" href="#id104">;</a></li>
<li><a class="reference internal" href="#id105">;</a></li>
<li><a class="reference internal" href="#id106">;</a></li>
<li><a class="reference internal" href="#id107">;</a></li>
<li><a class="reference internal" href="#id108">;</a></li>
<li><a class="reference internal" href="#id109">;</a></li>
<li><a class="reference internal" href="#id110">;</a></li>
<li><a class="reference internal" href="#id111">;</a></li>
<li><a class="reference internal" href="#id112">;</a></li>
<li><a class="reference internal" href="#id113">;</a></li>
<li><a class="reference internal" href="#id114">;</a></li>
<li><a class="reference internal" href="#id115">}</a></li>
<li><a class="reference internal" href="#id118">}</a></li>
<li><a class="reference internal" href="#id119">}</a></li>
<li><a class="reference internal" href="#id120">;</a></li>
<li><a class="reference internal" href="#id121">;</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/chapitre2.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">atoum 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Renaud LITTOLFF.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>